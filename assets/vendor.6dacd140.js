function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=r(S(i)?s(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(N(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(_(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(N(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":N(t)?JSON.stringify(t,c,2):String(t),c=(t,e)=>E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!N(e)||_(e)||k(e)?e:String(e),l={},h=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,y=t=>d.test(t),v=t=>t.startsWith("onUpdate:"),g=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,E=t=>"[object Map]"===x(t),I=t=>"[object Set]"===x(t),T=t=>"function"==typeof t,S=t=>"string"==typeof t,A=t=>"symbol"==typeof t,N=t=>null!==t&&"object"==typeof t,D=t=>N(t)&&T(t.then)&&T(t.catch),C=Object.prototype.toString,x=t=>C.call(t),k=t=>"[object Object]"===x(t),R=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},L=/-(\w)/g,F=P((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,V=P((t=>t.replace(M,"-$1").toLowerCase())),U=P((t=>t.charAt(0).toUpperCase()+t.slice(1))),j=P((t=>t?`on${U(t)}`:"")),q=(t,e)=>t!==e&&(t==t||e==e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},z=t=>{const e=parseFloat(t);return isNaN(e)?t:e},G=new WeakMap,H=[];let Q;const W=Symbol(""),$=Symbol("");function Y(t,e=l){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return t();if(!H.includes(n)){Z(n);try{return et.push(tt),tt=!0,H.push(n),Q=n,t()}finally{H.pop(),rt(),Q=H[H.length-1]}}};return n.id=J++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function X(t){t.active&&(Z(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let J=0;function Z(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tt=!0;const et=[];function nt(){et.push(tt),tt=!1}function rt(){const t=et.pop();tt=void 0===t||t}function it(t,e,n){if(!tt||void 0===Q)return;let r=G.get(t);r||G.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(Q)||(i.add(Q),Q.deps.push(i))}function ot(t,e,n,r,i,o){const s=G.get(t);if(!s)return;const a=new Set,u=t=>{t&&t.forEach((t=>{(t!==Q||t.allowRecurse)&&a.add(t)}))};if("clear"===e)s.forEach(u);else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&u(t)}));else switch(void 0!==n&&u(s.get(n)),e){case"add":_(t)?R(n)&&u(s.get("length")):(u(s.get(W)),E(t)&&u(s.get($)));break;case"delete":_(t)||(u(s.get(W)),E(t)&&u(s.get($)));break;case"set":E(t)&&u(s.get(W))}a.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=t("__proto__,__v_isRef,__isVue"),at=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(A)),ut=pt(),ct=pt(!1,!0),lt=pt(!0),ht=ft();function ft(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{const n=Array.prototype[e];t[e]=function(...t){const e=Jt(this);for(let n=0,i=this.length;n<i;n++)it(e,0,n+"");const r=n.apply(e,t);return-1===r||!1===r?n.apply(e,t.map(Jt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{const n=Array.prototype[e];t[e]=function(...t){nt();const e=n.apply(this,t);return rt(),e}})),t}function pt(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?zt:Kt:e?Bt:qt).get(n))return n;const o=_(n);if(!t&&o&&w(ht,r))return Reflect.get(ht,r,i);const s=Reflect.get(n,r,i);if(A(r)?at.has(r):st(r))return s;if(t||it(n,0,r),e)return s;if(ee(s)){return!o||!R(r)?s.value:s}return N(s)?t?Qt(s):Ht(s):s}}function dt(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=Jt(r),o=Jt(o),!_(e)&&ee(o)&&!ee(r)))return o.value=r,!0;const s=_(e)&&R(n)?Number(n)<e.length:w(e,n),a=Reflect.set(e,n,r,i);return e===Jt(i)&&(s?q(r,o)&&ot(e,"set",n,r):ot(e,"add",n,r)),a}}const yt={get:ut,set:dt(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ot(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return A(e)&&at.has(e)||it(t,0,e),n},ownKeys:function(t){return it(t,0,_(t)?"length":W),Reflect.ownKeys(t)}},vt={get:lt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},gt=g({},yt,{get:ct,set:dt(!0)}),mt=t=>N(t)?Ht(t):t,bt=t=>N(t)?Qt(t):t,wt=t=>t,_t=t=>Reflect.getPrototypeOf(t);function Et(t,e,n=!1,r=!1){const i=Jt(t=t.__v_raw),o=Jt(e);e!==o&&!n&&it(i,0,e),!n&&it(i,0,o);const{has:s}=_t(i),a=r?wt:n?bt:mt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function It(t,e=!1){const n=this.__v_raw,r=Jt(n),i=Jt(t);return t!==i&&!e&&it(r,0,t),!e&&it(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Tt(t,e=!1){return t=t.__v_raw,!e&&it(Jt(t),0,W),Reflect.get(t,"size",t)}function St(t){t=Jt(t);const e=Jt(this);return _t(e).has.call(e,t)||(e.add(t),ot(e,"add",t,t)),this}function At(t,e){e=Jt(e);const n=Jt(this),{has:r,get:i}=_t(n);let o=r.call(n,t);o||(t=Jt(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&ot(n,"set",t,e):ot(n,"add",t,e),this}function Nt(t){const e=Jt(this),{has:n,get:r}=_t(e);let i=n.call(e,t);i||(t=Jt(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ot(e,"delete",t,void 0),o}function Dt(){const t=Jt(this),e=0!==t.size,n=t.clear();return e&&ot(t,"clear",void 0,void 0),n}function Ct(t,e){return function(n,r){const i=this,o=i.__v_raw,s=Jt(o),a=e?wt:t?bt:mt;return!t&&it(s,0,W),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function xt(t,e,n){return function(...r){const i=this.__v_raw,o=Jt(i),s=E(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?wt:e?bt:mt;return!e&&it(o,0,u?$:W),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function kt(t){return function(...e){return"delete"!==t&&this}}function Rt(){const t={get(t){return Et(this,t)},get size(){return Tt(this)},has:It,add:St,set:At,delete:Nt,clear:Dt,forEach:Ct(!1,!1)},e={get(t){return Et(this,t,!1,!0)},get size(){return Tt(this)},has:It,add:St,set:At,delete:Nt,clear:Dt,forEach:Ct(!1,!0)},n={get(t){return Et(this,t,!0)},get size(){return Tt(this,!0)},has(t){return It.call(this,t,!0)},add:kt("add"),set:kt("set"),delete:kt("delete"),clear:kt("clear"),forEach:Ct(!0,!1)},r={get(t){return Et(this,t,!0,!0)},get size(){return Tt(this,!0)},has(t){return It.call(this,t,!0)},add:kt("add"),set:kt("set"),delete:kt("delete"),clear:kt("clear"),forEach:Ct(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=xt(i,!1,!1),n[i]=xt(i,!0,!1),e[i]=xt(i,!1,!0),r[i]=xt(i,!0,!0)})),[t,n,e,r]}const[Ot,Pt,Lt,Ft]=Rt();function Mt(t,e){const n=e?t?Ft:Lt:t?Pt:Ot;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}const Vt={get:Mt(!1,!1)},Ut={get:Mt(!1,!0)},jt={get:Mt(!0,!1)},qt=new WeakMap,Bt=new WeakMap,Kt=new WeakMap,zt=new WeakMap;function Gt(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>x(t).slice(8,-1))(t))}function Ht(t){return t&&t.__v_isReadonly?t:Wt(t,!1,yt,Vt,qt)}function Qt(t){return Wt(t,!0,vt,jt,Kt)}function Wt(t,e,n,r,i){if(!N(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=Gt(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function $t(t){return Yt(t)?$t(t.__v_raw):!(!t||!t.__v_isReactive)}function Yt(t){return!(!t||!t.__v_isReadonly)}function Xt(t){return $t(t)||Yt(t)}function Jt(t){return t&&Jt(t.__v_raw)||t}function Zt(t){return K(t,"__v_skip",!0),t}const te=t=>N(t)?Ht(t):t;function ee(t){return Boolean(t&&!0===t.__v_isRef)}function ne(t){return function(t,e=!1){if(ee(t))return t;return new re(t,e)}(t)}class re{constructor(t,e){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:te(t)}get value(){return it(Jt(this),0,"value"),this._value}set value(t){q(Jt(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:te(t),ot(Jt(this),"set","value",t))}}const ie={get:(t,e,n)=>{return ee(r=Reflect.get(t,e,n))?r.value:r;var r},set:(t,e,n,r)=>{const i=t[e];return ee(i)&&!ee(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function oe(t){return $t(t)?t:new Proxy(t,ie)}class se{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=Y(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ot(Jt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){const t=Jt(this);return t._dirty&&(t._value=this.effect(),t._dirty=!1),it(t,0,"value"),t._value}set value(t){this._setter(t)}}function ae(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){ce(o,e,n)}return i}function ue(t,e,n,r){if(T(t)){const i=ae(t,e,n,r);return i&&D(i)&&i.catch((t=>{ce(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(ue(t[o],e,n,r));return i}function ce(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void ae(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let le=!1,he=!1;const fe=[];let pe=0;const de=[];let ye=null,ve=0;const ge=[];let me=null,be=0;const we=Promise.resolve();let _e=null,Ee=null;function Ie(t){const e=_e||we;return t?e.then(this?t.bind(this):t):e}function Te(t){if(!(fe.length&&fe.includes(t,le&&t.allowRecurse?pe+1:pe)||t===Ee)){const e=function(t){let e=pe+1,n=fe.length;const r=Ce(t);for(;e<n;){const t=e+n>>>1;Ce(fe[t])<r?e=t+1:n=t}return e}(t);e>-1?fe.splice(e,0,t):fe.push(t),Se()}}function Se(){le||he||(he=!0,_e=we.then(xe))}function Ae(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Se()}function Ne(t,e=null){if(de.length){for(Ee=e,ye=[...new Set(de)],de.length=0,ve=0;ve<ye.length;ve++)ye[ve]();ye=null,ve=0,Ee=null,Ne(t,e)}}function De(t){if(ge.length){const t=[...new Set(ge)];if(ge.length=0,me)return void me.push(...t);for(me=t,me.sort(((t,e)=>Ce(t)-Ce(e))),be=0;be<me.length;be++)me[be]();me=null,be=0}}const Ce=t=>null==t.id?1/0:t.id;function xe(t){he=!1,le=!0,Ne(t),fe.sort(((t,e)=>Ce(t)-Ce(e)));try{for(pe=0;pe<fe.length;pe++){const t=fe[pe];t&&!1!==t.active&&ae(t,null,14)}}finally{pe=0,fe.length=0,De(),le=!1,_e=null,(fe.length||de.length||ge.length)&&xe(t)}}function ke(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(z))}let a,u=r[a=j(e)]||r[a=j(F(e))];!u&&o&&(u=r[a=j(V(e))]),u&&ue(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,ue(c,t,6,i)}}function Re(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!T(t)){const r=t=>{const n=Re(t,e,!0);n&&(a=!0,g(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(_(o)?o.forEach((t=>s[t]=null)):g(s,o),r.set(t,s),s):(r.set(t,null),null)}function Oe(t,e){return!(!t||!y(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,V(e))||w(t,e))}let Pe=null,Le=null;function Fe(t){const e=Pe;return Pe=t,Le=t&&t.type.__scopeId||null,e}function Me(t){Le=t}function Ve(){Le=null}const Ue=t=>je;function je(t,e=Pe,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&cr(-1);const i=Fe(e),o=t(...n);return Fe(i),r._d&&cr(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function qe(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:y}=t;let g;const m=Fe(t);try{let t;if(4&n.shapeFlag){const e=i||r;g=br(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,g=br(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:Be(u)}let m=g;if(t&&!1!==y){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&(1&n||6&n)&&(s&&e.some(v)&&(t=Ke(t,s)),m=gr(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),g=m}catch(b){or.length=0,ce(b,t,1),g=vr(rr)}return Fe(m),g}const Be=t=>{let e;for(const n in t)("class"===n||"style"===n||y(n))&&((e||(e={}))[n]=t[n]);return e},Ke=(t,e)=>{const n={};for(const r in t)v(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function ze(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Oe(n,o))return!0}return!1}function Ge(t,e,n=!1){const r=Dr||Pe;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&T(e)?e.call(r.proxy):e}}const He={};function Qe(t,e,n){return We(t,e,n)}function We(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l,a=Dr){let u,c,h=!1,p=!1;if(ee(t)?(u=()=>t.value,h=!!t._shallow):$t(t)?(u=()=>t,r=!0):_(t)?(p=!0,h=t.some($t),u=()=>t.map((t=>ee(t)?t.value:$t(t)?Xe(t):T(t)?ae(t,a,2):void 0))):u=T(t)?e?()=>ae(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),ue(t,a,3,[d])}:f,e&&r){const t=u;u=()=>Xe(t())}let d=t=>{c=b.options.onStop=()=>{ae(t,a,4)}},y=p?[]:He;const v=()=>{if(b.active)if(e){const t=b();(r||h||(p?t.some(((t,e)=>q(t,y[e]))):q(t,y)))&&(c&&c(),ue(e,a,3,[t,y===He?void 0:y,d]),y=t)}else b()};let g;v.allowRecurse=!!e,g="sync"===i?v:"post"===i?()=>Qn(v,a&&a.suspense):()=>{!a||a.isMounted?function(t){Ae(t,ye,de,ve)}(v):v()};const b=Y(u,{lazy:!0,onTrack:o,onTrigger:s,scheduler:g});return Lr(b,a),e?n?v():y=b():"post"===i?Qn(b,a&&a.suspense):b(),()=>{X(b),a&&m(a.effects,b)}}function $e(t,e,n){const r=this.proxy,i=S(t)?t.includes(".")?Ye(r,t):()=>r[t]:t.bind(r,r);let o;return T(e)?o=e:(o=e.handler,n=e),We(i,o.bind(r),n,this)}function Ye(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Xe(t,e=new Set){if(!N(t)||e.has(t)||t.__v_skip)return t;if(e.add(t),ee(t))Xe(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)Xe(t[n],e);else if(I(t)||E(t))t.forEach((t=>{Xe(t,e)}));else if(k(t))for(const n in t)Xe(t[n],e);return t}function Je(t){return T(t)?{setup:t,name:t.name}:t}const Ze=t=>!!t.type.__asyncLoader,tn=t=>t.type.__isKeepAlive;function en(t,e){rn(t,"a",e)}function nn(t,e){rn(t,"da",e)}function rn(t,e,n=Dr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(sn(e,r,n),n){let t=n.parent;for(;t&&t.parent;)tn(t.parent.vnode)&&on(r,e,n,t),t=t.parent}}function on(t,e,n,r){const i=sn(e,t,r,!0);pn((()=>{m(r[e],i)}),n)}function sn(t,e,n=Dr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;nt(),Cr(n);const i=ue(e,n,t,r);return Cr(null),rt(),i});return r?i.unshift(o):i.push(o),o}}const an=t=>(e,n=Dr)=>(!kr||"sp"===t)&&sn(t,e,n),un=an("bm"),cn=an("m"),ln=an("bu"),hn=an("u"),fn=an("bum"),pn=an("um"),dn=an("sp"),yn=an("rtg"),vn=an("rtc");function gn(t,e=Dr){sn("ec",t,e)}let mn=!0;function bn(t){const e=En(t),n=t.proxy,r=t.ctx;mn=!1,e.beforeCreate&&wn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:p,beforeUpdate:d,updated:y,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:w,unmounted:E,render:I,renderTracked:S,renderTriggered:A,errorCaptured:D,serverPrefetch:C,expose:x,inheritAttrs:k,components:R,directives:O,filters:P}=e;if(c&&function(t,e,n=f){_(t)&&(t=An(t));for(const r in t){const n=t[r];N(n)?e[r]="default"in n?Ge(n.from||r,n.default,!0):Ge(n.from||r):e[r]=Ge(n)}}(c,r,null),s)for(const f in s){const t=s[f];T(t)&&(r[f]=t.bind(n))}if(i){const e=i.call(n,n);N(e)&&(t.data=Ht(e))}if(mn=!0,o)for(const _ in o){const t=o[_],e=Mr({get:T(t)?t.bind(n,n):T(t.get)?t.get.bind(n,n):f,set:!T(t)&&T(t.set)?t.set.bind(n):f});Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const f in a)_n(a[f],r,n,f);if(u){const t=T(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{!function(t,e){if(Dr){let n=Dr.provides;const r=Dr.parent&&Dr.parent.provides;r===n&&(n=Dr.provides=Object.create(r)),n[t]=e}}(e,t[e])}))}function L(t,e){_(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&wn(l,t,"c"),L(un,h),L(cn,p),L(ln,d),L(hn,y),L(en,v),L(nn,g),L(gn,D),L(vn,S),L(yn,A),L(fn,b),L(pn,E),L(dn,C),_(x))if(x.length){const e=t.exposed||(t.exposed={});x.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});I&&t.render===f&&(t.render=I),null!=k&&(t.inheritAttrs=k),R&&(t.components=R),O&&(t.directives=O)}function wn(t,e,n){ue(_(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function _n(t,e,n,r){const i=r.includes(".")?Ye(n,r):()=>n[r];if(S(t)){const n=e[t];T(n)&&Qe(i,n)}else if(T(t))Qe(i,t.bind(n));else if(N(t))if(_(t))t.forEach((t=>_n(t,e,n,r)));else{const r=T(t.handler)?t.handler.bind(n):e[t.handler];T(r)&&Qe(i,r,t)}}function En(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>In(u,t,s,!0))),In(u,e,s)):u=e,o.set(e,u),u}function In(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&In(t,o,n,!0),i&&i.forEach((e=>In(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=Tn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const Tn={data:Sn,props:Dn,emits:Dn,methods:Dn,computed:Dn,beforeCreate:Nn,created:Nn,beforeMount:Nn,mounted:Nn,beforeUpdate:Nn,updated:Nn,beforeDestroy:Nn,destroyed:Nn,activated:Nn,deactivated:Nn,errorCaptured:Nn,serverPrefetch:Nn,components:Dn,directives:Dn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=g(Object.create(null),t);for(const r in e)n[r]=Nn(t[r],e[r]);return n},provide:Sn,inject:function(t,e){return Dn(An(t),An(e))}};function Sn(t,e){return e?t?function(){return g(T(t)?t.call(this,this):t,T(e)?e.call(this,this):e)}:e:t}function An(t){if(_(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nn(t,e){return t?[...new Set([].concat(t,e))]:e}function Dn(t,e){return t?g(g(Object.create(null),t),e):e}function Cn(t,e,n,r=!1){const i={},o={};K(o,pr,1),t.propsDefaults=Object.create(null),xn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Wt(i,!1,gt,Ut,Bt):t.type.props?t.props=i:t.props=o,t.attrs=o}function xn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(O(u))continue;const c=e[u];let l;i&&w(i,l=F(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:Oe(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=Jt(n),r=s||l;for(let s=0;s<o.length;s++){const a=o[s];n[a]=kn(i,e,a,r[a],t,!w(r,a))}}return a}function kn(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=w(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&T(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(Cr(i),r=o[n]=t.call(null,e),Cr(null))}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==V(n)||(r=!0))}return r}function Rn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!T(t)){const r=t=>{u=!0;const[n,r]=Rn(t,e,!0);g(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,h),h;if(_(o))for(let h=0;h<o.length;h++){const t=F(o[h]);On(t)&&(s[t]=l)}else if(o)for(const l in o){const t=F(l);if(On(t)){const e=o[l],n=s[t]=_(e)||T(e)?{type:e}:e;if(n){const e=Fn(Boolean,n.type),r=Fn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function On(t){return"$"!==t[0]}function Pn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Ln(t,e){return Pn(t)===Pn(e)}function Fn(t,e){return _(e)?e.findIndex((e=>Ln(e,t))):T(e)&&Ln(e,t)?0:-1}const Mn=t=>"_"===t[0]||"$stable"===t,Vn=t=>_(t)?t.map(br):[br(t)],Un=(t,e,n)=>{const r=je((t=>Vn(e(t))),n);return r._c=!1,r},jn=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Mn(i))continue;const n=t[i];if(T(n))e[i]=Un(0,n,r);else if(null!=n){const t=Vn(n);e[i]=()=>t}}},qn=(t,e)=>{const n=Vn(e);t.slots.default=()=>n};function Bn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(nt(),ue(u,n,8,[t.el,a,t,e]),rt())}}function Kn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zn=0;function Gn(t,e){return function(n,r=null){null==r||N(r)||(r=null);const i=Kn(),o=new Set;let s=!1;const a=i.app={_uid:zn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Vr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&T(t.install)?(o.add(t),t.install(a,...e)):T(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=vr(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Hn={scheduler:Te,allowRecurse:!0},Qn=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):Ae(t,me,ge,be)},Wn=(t,e,n,r,i=!1)=>{if(_(t))return void t.forEach(((t,o)=>Wn(t,e&&(_(e)?e[o]:e),n,r,i)));if(Ze(r)&&!i)return;const o=4&r.shapeFlag?Pr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===l?a.refs={}:a.refs,f=a.setupState;if(null!=c&&c!==u&&(S(c)?(h[c]=null,w(f,c)&&(f[c]=null)):ee(c)&&(c.value=null)),S(u)){const t=()=>{h[u]=s,w(f,u)&&(f[u]=s)};s?(t.id=-1,Qn(t,n)):t()}else if(ee(u)){const t=()=>{u.value=s};s?(t.id=-1,Qn(t,n)):t()}else T(u)&&ae(u,a,12,[s,h])};function $n(t){return function(t,e){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:a,createComment:u,setText:c,setElementText:p,parentNode:d,nextSibling:y,setScopeId:v=f,cloneNode:m,insertStaticContent:b}=t,_=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!1)=>{t&&!fr(t,e)&&(r=st(t),J(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case nr:E(t,e,n,r);break;case rr:I(t,e,n,r);break;case ir:null==t&&T(e,n,r,s);break;case er:M(t,e,n,r,i,o,s,a,u);break;default:1&h?N(t,e,n,r,i,o,s,a,u):6&h?U(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,ut)}null!=l&&i&&Wn(l,t&&t.ref,o,e||t,!e)},E=(t,e,r,i)=>{if(null==t)n(e.el=a(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},I=(t,e,r,i)=>{null==t?n(e.el=u(e.children||""),r,i):e.el=t.el},T=(t,e,n,r)=>{const i=b(t.children,e,n,r,t.staticCache);t.el||(t.staticCache=i),t.el=i[0],t.anchor=i[i.length-1]},S=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=y(t),n(t,r,i),t=o;n(e,r,i)},A=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=y(t),r(t),t=n;r(e)},N=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?C(e,n,r,i,o,s,a,u):R(t,e,i,o,s,a,u)},C=(t,e,r,o,a,u,c,l)=>{let h,f;const{type:d,props:y,shapeFlag:v,transition:g,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==m&&-1===b)h=t.el=m(t.el);else{if(h=t.el=s(t.type,u,y&&y.is,y),8&v?p(h,t.children):16&v&&k(t.children,h,null,o,a,u&&"foreignObject"!==d,c,l||!!t.dynamicChildren),w&&Bn(t,null,o,"created"),y){for(const e in y)O(e)||i(h,e,null,y[e],u,t.children,o,a,it);(f=y.onVnodeBeforeMount)&&Yn(f,o,t)}x(h,t,t.scopeId,c,o)}w&&Bn(t,null,o,"beforeMount");const _=(!a||a&&!a.pendingBranch)&&g&&!g.persisted;_&&g.beforeEnter(h),n(h,e,r),((f=y&&y.onVnodeMounted)||_||w)&&Qn((()=>{f&&Yn(f,o,t),_&&g.enter(h),w&&Bn(t,null,o,"mounted")}),a)},x=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;x(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},k=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?wr(t[c]):br(t[c]);_(null,u,e,n,r,i,o,s,a)}},R=(t,e,n,r,s,a,u)=>{const c=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:d}=e;h|=16&t.patchFlag;const y=t.props||l,v=e.props||l;let g;if((g=v.onVnodeBeforeUpdate)&&Yn(g,n,e,t),d&&Bn(e,t,n,"beforeUpdate"),h>0){if(16&h)L(c,e,y,v,n,r,s);else if(2&h&&y.class!==v.class&&i(c,"class",null,v.class,s),4&h&&i(c,"style",y.style,v.style,s),8&h){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const u=a[e],l=y[u],h=v[u];(h!==l||o&&o(c,u))&&i(c,u,l,h,s,t.children,n,r,it)}}1&h&&t.children!==e.children&&p(c,e.children)}else u||null!=f||L(c,e,y,v,n,r,s);const m=s&&"foreignObject"!==e.type;f?P(t.dynamicChildren,f,c,n,r,m,a):u||H(t,e,c,null,n,r,m,a,!1),((g=v.onVnodeUpdated)||d)&&Qn((()=>{g&&Yn(g,n,e,t),d&&Bn(e,t,n,"updated")}),r)},P=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===er||!fr(u,c)||6&u.shapeFlag||64&u.shapeFlag)?d(u.el):n;_(u,c,l,null,r,i,o,s,!0)}},L=(t,e,n,r,s,a,u)=>{if(n!==r){for(const c in r){if(O(c))continue;const l=r[c],h=n[c];(l!==h||o&&o(t,c))&&i(t,c,h,l,u,e.children,s,a,it)}if(n!==l)for(const o in n)O(o)||o in r||i(t,o,n[o],null,u,e.children,s,a,it)}},M=(t,e,r,i,o,s,u,c,l)=>{const h=e.el=t?t.el:a(""),f=e.anchor=t?t.anchor:a("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:y}=e;d&&(l=!0),y&&(c=c?c.concat(y):y),null==t?(n(h,r,i),n(f,r,i),k(e.children,r,f,o,s,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(P(t.dynamicChildren,d,r,o,s,u,c),(null!=e.key||o&&e===o.subTree)&&Xn(t,e,!0)):H(t,e,r,f,o,s,u,c,l)},U=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):j(e,n,r,i,o,s,u):q(t,e,u)},j=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Ar,o={uid:Nr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Rn(r,i),emitsOptions:Re(r,i),emit:null,emitted:null,propsDefaults:l,inheritAttrs:r.inheritAttrs,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ke.bind(null,o),o}(t,r,i);if(tn(t)&&(a.ctx.renderer=ut),function(t,e=!1){kr=e;const{props:n,children:r}=t.vnode,i=xr(t);Cn(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=Jt(e),K(e,"_",n)):jn(e,t.slots={})}else t.slots={},e&&qn(t,e);K(t.slots,pr,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Zt(new Proxy(t.ctx,Tr));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;Dr=t,nt();const i=ae(r,t,0,[t.props,n]);if(rt(),Dr=null,D(i)){const n=()=>{Dr=null};if(i.then(n,n),e)return i.then((e=>{Rr(t,e)})).catch((e=>{ce(e,t,0)}));t.asyncDep=i}else Rr(t,i)}else Or(t)}(t,e):void 0;kr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,z),!t.el){const t=a.subTree=vr(rr);I(null,t,e,n)}}else z(a,t,e,n,i,o,s)},q=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||ze(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?ze(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Oe(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void G(r,e,n);r.next=e,function(t){const e=fe.indexOf(t);e>pe&&fe.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},z=(t,e,n,r,i,o,s)=>{t.update=Y((function(){if(t.isMounted){let e,{next:n,bu:r,u:a,parent:u,vnode:c}=t,l=n;n?(n.el=c.el,G(t,n,s)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Yn(e,u,n,c);const h=qe(t),f=t.subTree;t.subTree=h,_(f,h,d(f.el),st(f),t,i,o),n.el=h.el,null===l&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,h.el),a&&Qn(a,i),(e=n.props&&n.props.onVnodeUpdated)&&Qn((()=>Yn(e,u,n,c)),i)}else{let s;const{el:a,props:u}=e,{bm:c,m:l,parent:h}=t;if(c&&B(c),(s=u&&u.onVnodeBeforeMount)&&Yn(s,h,e),a&&lt){const n=()=>{t.subTree=qe(t),lt(a,t.subTree,t,i,null)};Ze(e)?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=qe(t);_(null,s,n,r,t,i,o),e.el=s.el}if(l&&Qn(l,i),s=u&&u.onVnodeMounted){const t=e;Qn((()=>Yn(s,h,t)),i)}256&e.shapeFlag&&t.a&&Qn(t.a,i),t.isMounted=!0,e=n=r=null}}),Hn)},G=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=Jt(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;xn(t,e,i,o)&&(c=!0);for(const o in a)e&&(w(e,o)||(r=V(o))!==o&&w(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=kn(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&w(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(w(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=F(s);i[e]=kn(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&ot(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=l;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(g(i,e),n||1!==t||delete i._):(o=!e.$stable,jn(e,i)),s=e}else e&&(qn(t,e),s={default:1});if(o)for(const a in i)Mn(a)||a in s||delete i[a]})(t,e.children,n),nt(),Ne(void 0,t.update),rt()},H=(t,e,n,r,i,o,s,a,u=!1)=>{const c=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:d}=e;if(f>0){if(128&f)return void W(c,h,n,r,i,o,s,a,u);if(256&f)return void Q(c,h,n,r,i,o,s,a,u)}8&d?(16&l&&it(c,i,o),h!==c&&p(n,h)):16&l?16&d?W(c,h,n,r,i,o,s,a,u):it(c,i,o,!0):(8&l&&p(n,""),16&d&&k(h,n,r,i,o,s,a,u))},Q=(t,e,n,r,i,o,s,a,u)=>{e=e||h;const c=(t=t||h).length,l=e.length,f=Math.min(c,l);let p;for(p=0;p<f;p++){const r=e[p]=u?wr(e[p]):br(e[p]);_(t[p],r,n,null,i,o,s,a,u)}c>l?it(t,i,o,!0,!1,f):k(e,n,r,i,o,s,a,u,f)},W=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let f=t.length-1,p=l-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?wr(e[c]):br(e[c]);if(!fr(r,l))break;_(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?wr(e[p]):br(e[p]);if(!fr(r,c))break;_(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,h=t<l?e[t].el:r;for(;c<=p;)_(null,e[c]=u?wr(e[c]):br(e[c]),n,h,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)J(t[c],i,o,!0),c++;else{const d=c,y=c,v=new Map;for(c=y;c<=p;c++){const t=e[c]=u?wr(e[c]):br(e[c]);null!=t.key&&v.set(t.key,c)}let g,m=0;const b=p-y+1;let w=!1,E=0;const I=new Array(b);for(c=0;c<b;c++)I[c]=0;for(c=d;c<=f;c++){const r=t[c];if(m>=b){J(r,i,o,!0);continue}let l;if(null!=r.key)l=v.get(r.key);else for(g=y;g<=p;g++)if(0===I[g-y]&&fr(r,e[g])){l=g;break}void 0===l?J(r,i,o,!0):(I[l-y]=c+1,l>=E?E=l:w=!0,_(r,e[l],n,null,i,o,s,a,u),m++)}const T=w?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=(o+s)/2|0,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(I):h;for(g=T.length-1,c=b-1;c>=0;c--){const t=y+c,h=e[t],f=t+1<l?e[t+1].el:r;0===I[c]?_(null,h,n,f,i,o,s,a,u):w&&(g<0||c!==T[g]?$(h,n,f,2):g--)}}},$=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void $(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,ut);if(a===er){n(s,e,r);for(let t=0;t<c.length;t++)$(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===ir)return void S(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Qn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},J=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&Wn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f;let d;if((d=s&&s.onVnodeBeforeUnmount)&&Yn(d,e,t),6&l)et(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Bn(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,ut,r):c&&(o!==er||h>0&&64&h)?it(c,e,n,!1,!0):(o===er&&(128&h||256&h)||!i&&16&l)&&it(u,e,n),r&&Z(t)}((d=s&&s.onVnodeUnmounted)||p)&&Qn((()=>{d&&Yn(d,e,t),p&&Bn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===er)return void tt(n,i);if(e===ir)return void A(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},tt=(t,e)=>{let n;for(;t!==e;)n=y(t),r(t),t=n;r(e)},et=(t,e,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:a}=t;if(r&&B(r),i)for(let u=0;u<i.length;u++)X(i[u]);o&&(X(o),J(s,t,e,n)),a&&Qn(a,e),Qn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},it=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)J(t[s],e,n,r,i)},st=t=>6&t.shapeFlag?st(t.component.subTree):128&t.shapeFlag?t.suspense.next():y(t.anchor||t.el),at=(t,e,n)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):_(e._vnode||null,t,e,null,null,null,n),De(),e._vnode=t},ut={p:_,um:J,m:$,r:Z,mt:j,mc:k,pc:H,pbc:P,n:st,o:t};let ct,lt;e&&([ct,lt]=e(ut));return{render:at,hydrate:ct,createApp:Gn(at,ct)}}(t)}function Yn(t,e,n,r=null){ue(t,e,7,[n,r])}function Xn(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=wr(i[o]),e.el=t.el),n||Xn(t,e))}}function Jn(t,e){return function(t,e,n=!0,r=!1){const i=Pe||Dr;if(i){const n=i.type;if("components"===t){const t=Fr(n);if(t&&(t===e||t===F(e)||t===U(F(e))))return n}const o=tr(i[t]||n[t],e)||tr(i.appContext[t],e);return!o&&r?n:o}}("components",t,!0,e)||t}const Zn=Symbol();function tr(t,e){return t&&(t[e]||t[F(e)]||t[U(F(e))])}const er=Symbol(void 0),nr=Symbol(void 0),rr=Symbol(void 0),ir=Symbol(void 0),or=[];let sr=null;function ar(t=!1){or.push(sr=t?null:[])}let ur=1;function cr(t){ur+=t}function lr(t,e,n,r,i){const o=vr(t,e,n,r,i,!0);return o.dynamicChildren=ur>0?sr||h:null,or.pop(),sr=or[or.length-1]||null,ur>0&&sr&&sr.push(o),o}function hr(t){return!!t&&!0===t.__v_isVNode}function fr(t,e){return t.type===e.type&&t.key===e.key}const pr="__vInternal",dr=({key:t})=>null!=t?t:null,yr=({ref:t})=>null!=t?S(t)||ee(t)||T(t)?{i:Pe,r:t}:t:null,vr=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==Zn||(t=rr);if(hr(t)){const r=gr(t,e,!0);return n&&_r(r,n),r}u=t,T(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){(Xt(e)||pr in e)&&(e=g({},e));let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),N(n)&&(Xt(n)&&!_(n)&&(n=g({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:N(t)?4:T(t)?2:0,l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&dr(e),ref:e&&yr(e),scopeId:Le,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,shapeFlag:c,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};_r(l,n),128&c&&t.normalize(l);ur>0&&!s&&sr&&(i>0||6&c)&&32!==i&&sr.push(l);return l};function gr(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=t,c=e?function(...t){const e=g({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(y(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&dr(c),ref:e&&e.ref?n&&o?_(o)?o.concat(yr(e)):[o,yr(e)]:yr(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,staticCache:t.staticCache,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==er?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gr(t.ssContent),ssFallback:t.ssFallback&&gr(t.ssFallback),el:t.el,anchor:t.anchor}}function mr(t=" ",e=0){return vr(nr,null,t,e)}function br(t){return null==t||"boolean"==typeof t?vr(rr):_(t)?vr(er,null,t.slice()):"object"==typeof t?wr(t):vr(nr,null,String(t))}function wr(t){return null===t.el?t:gr(t)}function _r(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),_r(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||pr in e?3===r&&Pe&&(1===Pe.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=Pe}}else T(e)?(e={default:e,_ctx:Pe},n=32):(e=String(e),64&r?(n=16,e=[mr(e)]):n=8);t.children=e,t.shapeFlag|=n}const Er=t=>t?xr(t)?Pr(t)||t.proxy:Er(t.parent):null,Ir=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Er(t.parent),$root:t=>Er(t.root),$emit:t=>t.emit,$options:t=>En(t),$forceUpdate:t=>()=>Te(t.update),$nextTick:t=>Ie.bind(t.proxy),$watch:t=>$e.bind(t)}),Tr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];mn&&(s[e]=4)}}const h=Ir[e];let f,p;return h?("$attrs"===e&&it(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(w(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(a=o[0])&&w(a,s)||w(r,s)||w(Ir,s)||w(i.config.globalProperties,s)}},Sr=g({},Tr,{get(t,e){if(e!==Symbol.unscopables)return Tr.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),Ar=Kn();let Nr=0;let Dr=null;const Cr=t=>{Dr=t};function xr(t){return 4&t.vnode.shapeFlag}let kr=!1;function Rr(t,e,n){T(e)?t.render=e:N(e)&&(t.setupState=oe(e)),Or(t)}function Or(t,e,n){const r=t.type;t.render||(t.render=r.render||f,t.render._rc&&(t.withProxy=new Proxy(t.ctx,Sr))),Dr=t,nt(),bn(t),rt(),Dr=null}function Pr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(oe(Zt(t.exposed)),{get:(e,n)=>n in e?e[n]:n in Ir?Ir[n](t):void 0}))}function Lr(t,e=Dr){e&&(e.effects||(e.effects=[])).push(t)}function Fr(t){return T(t)&&t.displayName||t.name}function Mr(t){const e=function(t){let e,n;return T(t)?(e=t,n=f):(e=t.get,n=t.set),new se(e,n,T(t)||!t.set)}(t);return Lr(e.effect),e}const Vr="3.1.4",Ur="http://www.w3.org/2000/svg",jr="undefined"!=typeof document?document:null,qr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?jr.createElementNS(Ur,t):jr.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>jr.createTextNode(t),createComment:t=>jr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>jr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,i){if(i){let t,r,o=0,s=i.length;for(;o<s;o++){const a=i[o].cloneNode(!0);0===o&&(t=a),o===s-1&&(r=a),e.insertBefore(a,n)}return[t,r]}const o=n?n.previousSibling:e.lastChild;if(n){let i,o=!1;n instanceof Element?i=n:(o=!0,i=r?jr.createElementNS(Ur,"g"):jr.createElement("div"),e.insertBefore(i,n)),i.insertAdjacentHTML("beforebegin",t),o&&e.removeChild(i)}else e.insertAdjacentHTML("beforeend",t);let s=o?o.nextSibling:e.firstChild;const a=n?n.previousSibling:e.lastChild,u=[];for(;s&&(u.push(s),s!==a);)s=s.nextSibling;return u}};const Br=/\s*!important$/;function Kr(t,e,n){if(_(n))n.forEach((n=>Kr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Gr[e];if(n)return n;let r=F(e);if("filter"!==r&&r in t)return Gr[e]=r;r=U(r);for(let i=0;i<zr.length;i++){const n=zr[i]+r;if(n in t)return Gr[e]=n}return e}(t,e);Br.test(n)?t.setProperty(V(r),n.replace(Br,""),"important"):t[r]=n}}const zr=["Webkit","Moz","ms"],Gr={};const Hr="http://www.w3.org/1999/xlink";let Qr=Date.now,Wr=!1;if("undefined"!=typeof window){Qr()>document.createEvent("Event").timeStamp&&(Qr=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Wr=!!(t&&Number(t[1])<=53)}let $r=0;const Yr=Promise.resolve(),Xr=()=>{$r=0};function Jr(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(Zr.test(t)){let n;for(e={};n=t.match(Zr);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[V(t.slice(2)),e]}(e);if(r){!function(t,e,n,r){t.addEventListener(e,n,r)}(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||Qr();(Wr||r>=n.attached-1)&&ue(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>$r||(Yr.then(Xr),$r=Qr()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const Zr=/(?:Once|Passive|Capture)$/;const ti=/^on[a-z]/;const ei=g({patchProp:(t,e,r,i,o=!1,s,a,u,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const r=t.style;if(n)if(S(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)Kr(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&Kr(r,t,"")}else t.removeAttribute("style")}(t,r,i);break;default:y(e)?v(e)||Jr(t,e,0,i,a):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&ti.test(e)&&T(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(ti.test(e)&&S(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName){t._value=n;const r=null==n?"":n;return t.value!==r&&(t.value=r),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(db){}}(t,e,i,s,a,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,r,i,o){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(Hr,e.slice(6,e.length)):t.setAttributeNS(Hr,e,r);else{const i=n(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},qr);let ni;const ri=(...t)=>{const e=(ni||(ni=$n(ei))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var ii=function(t,e){return(ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function oi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ii(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var si=function(){return(si=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ai(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(db){o(db)}}function a(t){try{u(r.throw(t))}catch(db){o(db)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function ui(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(db){o=[6,db],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ci(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function li(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function hi(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function pi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=pi(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var di=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function yi(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vi(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(db){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gi=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,mi.prototype.create),o}return oi(e,t),e}(Error),mi=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?bi(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new gi(i,a,r);return u},t}();function bi(t,e){return t.replace(wi,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var wi=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ei(t,e){var n=new Ii(t,e);return n.subscribe.bind(n)}var Ii=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Ti),void 0===r.error&&(r.error=Ti),void 0===r.complete&&(r.complete=Ti);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(db){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(db){"undefined"!=typeof console&&console.error&&console.error(db)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Ti(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){return t&&t._delegate?t._delegate:t}var Ai=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Ni=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new di;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(db){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(db){if(r)return null;throw db}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(db){}try{for(var r=ci(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=li(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(db){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ai(this,void 0,void 0,(function(){var t;return ui(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(hi(hi([],li(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),li(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=ci(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=li(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=ci(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Di,Ci=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ni(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function xi(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ki,Ri,Oi=[];(Ri=ki||(ki={}))[Ri.DEBUG=0]="DEBUG",Ri[Ri.VERBOSE=1]="VERBOSE",Ri[Ri.INFO=2]="INFO",Ri[Ri.WARN=3]="WARN",Ri[Ri.ERROR=4]="ERROR",Ri[Ri.SILENT=5]="SILENT";var Pi,Li={debug:ki.DEBUG,verbose:ki.VERBOSE,info:ki.INFO,warn:ki.WARN,error:ki.ERROR,silent:ki.SILENT},Fi=ki.INFO,Mi=((Di={})[ki.DEBUG]="log",Di[ki.VERBOSE]="log",Di[ki.INFO]="info",Di[ki.WARN]="warn",Di[ki.ERROR]="error",Di),Vi=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Mi[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,xi(["["+i+"]  "+t.name+":"],n))}},Ui=function(){function t(t){this.name=t,this._logLevel=Fi,this._logHandler=Vi,this._userLogHandler=null,Oi.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ki))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Li[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,xi([this,ki.DEBUG],t)),this._logHandler.apply(this,xi([this,ki.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,xi([this,ki.VERBOSE],t)),this._logHandler.apply(this,xi([this,ki.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,xi([this,ki.INFO],t)),this._logHandler.apply(this,xi([this,ki.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,xi([this,ki.WARN],t)),this._logHandler.apply(this,xi([this,ki.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,xi([this,ki.ERROR],t)),this._logHandler.apply(this,xi([this,ki.ERROR],t))},t}();function ji(t){Oi.forEach((function(e){e.setLogLevel(t)}))}var qi,Bi=((Pi={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Pi["bad-app-name"]="Illegal App name: '{$appName}",Pi["duplicate-app"]="Firebase App named '{$appName}' already exists",Pi["app-deleted"]="Firebase App named '{$appName}' already deleted",Pi["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Pi["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Pi),Ki=new mi("app","Firebase",Bi),zi=((qi={})["@firebase/app"]="fire-core",qi["@firebase/analytics"]="fire-analytics",qi["@firebase/app-check"]="fire-app-check",qi["@firebase/auth"]="fire-auth",qi["@firebase/database"]="fire-rtdb",qi["@firebase/functions"]="fire-fn",qi["@firebase/installations"]="fire-iid",qi["@firebase/messaging"]="fire-fcm",qi["@firebase/performance"]="fire-perf",qi["@firebase/remote-config"]="fire-rc",qi["@firebase/storage"]="fire-gcs",qi["@firebase/firestore"]="fire-fst",qi["fire-js"]="fire-js",qi["firebase-wrapper"]="fire-js-all",qi),Gi=new Ui("@firebase/app"),Hi=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=pi(void 0,t),this.container=new Ci(e.name),this._addComponent(new Ai("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(db){Gi.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,db)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ki.create("app-deleted",{appName:this.name_})},t}();Hi.prototype.name&&Hi.prototype.options||Hi.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qi(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Ki.create("bad-app-name",{appName:String(s)});if(_i(e,s))throw Ki.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=zi[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Gi.warn(u.join(" "))}o(new Ai(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:ji,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ki.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Li[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ki[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Oi;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!_i(e,t=t||"[DEFAULT]"))throw Ki.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Gi.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Ki.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&pi(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi=function t(){var e=Qi(Hi);return e.INTERNAL=si(si({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){pi(e,t)},createSubscribe:Ei,ErrorFactory:mi,deepExtend:pi}),e}(),$i=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Gi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Yi=self.firebase.SDK_VERSION;Yi&&Yi.indexOf("LITE")>=0&&Gi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Xi=Wi.initializeApp;Wi.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return vi()&&Gi.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Xi.apply(void 0,t)};var Ji,Zi,to=Wi;(Ji=to).INTERNAL.registerComponent(new Ai("platform-logger",(function(t){return new $i(t)}),"PRIVATE")),Ji.registerVersion("@firebase/app","0.6.29",Zi),Ji.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
to.registerVersion("firebase","8.8.1","app"),to.SDK_VERSION="8.8.1";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var eo=function(t,e){return(eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function no(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ro,io="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oo=oo||{},so=io||self;function ao(){}function uo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function co(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var lo="closure_uid_"+(1e9*Math.random()>>>0),ho=0;function fo(t,e,n){return t.call.apply(t.bind,arguments)}function po(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function yo(t,e,n){return(yo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fo:po).apply(null,arguments)}function vo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function go(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function mo(){this.s=this.s,this.o=this.o}var bo={};mo.prototype.s=!1,mo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,lo)&&t[lo]||(t[lo]=++ho)}(this);delete bo[t]}},mo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var wo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},_o=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Eo(t){return Array.prototype.concat.apply([],arguments)}function Io(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function To(t){return/^[\s\xa0]*$/.test(t)}var So,Ao=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function No(t,e){return-1!=t.indexOf(e)}function Do(t,e){return t<e?-1:t>e?1:0}t:{var Co=so.navigator;if(Co){var xo=Co.userAgent;if(xo){So=xo;break t}}So=""}function ko(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ro(t){var e={};for(var n in t)e[n]=t[n];return e}var Oo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Po(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Oo.length;o++)n=Oo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Lo(t){return Lo[" "](t),t}Lo[" "]=ao;var Fo,Mo,Vo=No(So,"Opera"),Uo=No(So,"Trident")||No(So,"MSIE"),jo=No(So,"Edge"),qo=jo||Uo,Bo=No(So,"Gecko")&&!(No(So.toLowerCase(),"webkit")&&!No(So,"Edge"))&&!(No(So,"Trident")||No(So,"MSIE"))&&!No(So,"Edge"),Ko=No(So.toLowerCase(),"webkit")&&!No(So,"Edge");function zo(){var t=so.document;return t?t.documentMode:void 0}t:{var Go="",Ho=(Mo=So,Bo?/rv:([^\);]+)(\)|;)/.exec(Mo):jo?/Edge\/([\d\.]+)/.exec(Mo):Uo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mo):Ko?/WebKit\/(\S+)/.exec(Mo):Vo?/(?:Version)[ \/]?(\S+)/.exec(Mo):void 0);if(Ho&&(Go=Ho?Ho[1]:""),Uo){var Qo=zo();if(null!=Qo&&Qo>parseFloat(Go)){Fo=String(Qo);break t}}Fo=Go}var Wo,$o={};function Yo(){return function(t){var e=$o;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Ao(String(Fo)).split("."),n=Ao("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Do(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Do(0==o[2].length,0==s[2].length)||Do(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(so.document&&Uo){var Xo=zo();Wo=Xo||(parseInt(Fo,10)||void 0)}else Wo=void 0;var Jo=Wo,Zo=function(){if(!so.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{so.addEventListener("test",ao,e),so.removeEventListener("test",ao,e)}catch(n){}return t}();function ts(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function es(t,e){if(ts.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Bo){t:{try{Lo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ns[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&es.Z.h.call(this)}}ts.prototype.h=function(){this.defaultPrevented=!0},go(es,ts);var ns={2:"touch",3:"pen",4:"mouse"};es.prototype.h=function(){es.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var rs="closure_listenable_"+(1e6*Math.random()|0),is=0;function os(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++is,this.ca=this.fa=!1}function ss(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function as(t){this.src=t,this.g={},this.h=0}function us(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=wo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ss(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function cs(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}as.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=cs(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new os(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ls="closure_lm_"+(1e6*Math.random()|0),hs={};function fs(t,e,n,r,i){if(r&&r.once)return ds(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)fs(t,e[o],n,r,i);return null}return n=_s(n),t&&t[rs]?t.N(e,n,co(r)?!!r.capture:!!r,i):ps(t,e,n,!1,r,i)}function ps(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=co(i)?!!i.capture:!!i,a=bs(t);if(a||(t[ls]=a=new as(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=ms;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Zo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ds(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ds(t,e[o],n,r,i);return null}return n=_s(n),t&&t[rs]?t.O(e,n,co(r)?!!r.capture:!!r,i):ps(t,e,n,!0,r,i)}function ys(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ys(t,e[o],n,r,i);else r=co(r)?!!r.capture:!!r,n=_s(n),t&&t[rs]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=cs(o=t.g[e],n,r,i))&&(ss(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=bs(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cs(e,n,r,i)),(n=-1<t?e[t]:null)&&vs(n))}function vs(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[rs])us(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bs(e))?(us(n,t),0==n.h&&(n.src=null,e[ls]=null)):ss(t)}}}function gs(t){return t in hs?hs[t]:hs[t]="on"+t}function ms(t,e){if(t.ca)t=!0;else{e=new es(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&vs(t),t=n.call(r,e)}return t}function bs(t){return(t=t[ls])instanceof as?t:null}var ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function _s(t){return"function"==typeof t?t:(t[ws]||(t[ws]=function(e){return t.handleEvent(e)}),t[ws])}function Es(){mo.call(this),this.i=new as(this),this.P=this,this.I=null}function Is(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new ts(e,t);else if(e instanceof ts)e.target=e.target||t;else{var i=e;Po(e=new ts(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ts(s,r,!0,e)&&i}if(i=Ts(s=e.g=t,r,!0,e)&&i,i=Ts(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ts(s=e.g=n[o],r,!1,e)&&i}function Ts(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&us(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}go(Es,mo),Es.prototype[rs]=!0,Es.prototype.removeEventListener=function(t,e,n,r){ys(this,t,e,n,r)},Es.prototype.M=function(){if(Es.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ss(n[r]);delete e.g[t],e.h--}}this.I=null},Es.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Es.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ss=so.JSON.stringify;function As(){var t=Ps,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ns,Ds=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Cs.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Cs=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new xs}),(function(t){return t.reset()})),xs=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function ks(t){so.setTimeout((function(){throw t}),0)}function Rs(t,e){Ns||function(){var t=so.Promise.resolve(void 0);Ns=function(){t.then(Ls)}}(),Os||(Ns(),Os=!0),Ps.add(t,e)}var Os=!1,Ps=new Ds;function Ls(){for(var t;t=As();){try{t.h.call(t.g)}catch(n){ks(n)}var e=Cs;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Os=!1}function Fs(t,e){Es.call(this),this.h=t||1,this.g=e||so,this.j=yo(this.kb,this),this.l=Date.now()}function Ms(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Vs(t,e,n){if("function"==typeof t)n&&(t=yo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=yo(t.handleEvent,t)}return 2147483647<Number(e)?-1:so.setTimeout(t,e||0)}function Us(t){t.g=Vs((function(){t.g=null,t.i&&(t.i=!1,Us(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}go(Fs,Es),(ro=Fs.prototype).da=!1,ro.S=null,ro.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Is(this,"tick"),this.da&&(Ms(this),this.start()))}},ro.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ro.M=function(){Fs.Z.M.call(this),Ms(this),delete this.g};var js=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}eo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Us(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(so.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(mo);function qs(t){mo.call(this),this.h=t,this.g={}}go(qs,mo);var Bs=[];function Ks(t,e,n,r){Array.isArray(n)||(n&&(Bs[0]=n.toString()),n=Bs);for(var i=0;i<n.length;i++){var o=fs(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function zs(t){ko(t.g,(function(t,e){this.g.hasOwnProperty(e)&&vs(t)}),t),t.g={}}function Gs(){this.g=!0}function Hs(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ss(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}qs.prototype.M=function(){qs.Z.M.call(this),zs(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gs.prototype.Aa=function(){this.g=!1},Gs.prototype.info=function(){};var Qs={},Ws=null;function $s(){return Ws=Ws||new Es}function Ys(t){ts.call(this,Qs.Ma,t)}function Xs(t){var e=$s();Is(e,new Ys(e,t))}function Js(t,e){ts.call(this,Qs.STAT_EVENT,t),this.stat=e}function Zs(t){var e=$s();Is(e,new Js(e,t))}function ta(t,e){ts.call(this,Qs.Na,t),this.size=e}function ea(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return so.setTimeout((function(){t()}),e)}Qs.Ma="serverreachability",go(Ys,ts),Qs.STAT_EVENT="statevent",go(Js,ts),Qs.Na="timingevent",go(ta,ts);var na={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ra={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ia(){}function oa(t){return t.h||(t.h=t.i())}function sa(){}ia.prototype.h=null;var aa,ua={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ca(){ts.call(this,"d")}function la(){ts.call(this,"c")}function ha(){}function fa(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new qs(this),this.P=da,t=qo?125:void 0,this.W=new Fs(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pa}function pa(){this.i=null,this.g="",this.h=!1}go(ca,ts),go(la,ts),go(ha,ia),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},aa=new ha;var da=45e3,ya={},va={};function ga(t,e,n){t.K=1,t.v=ja(Pa(e)),t.s=n,t.U=!0,ma(t,null)}function ma(t,e){t.F=Date.now(),Ea(t),t.A=Pa(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Za(n.h,"t",r),t.C=0,n=t.l.H,t.h=new pa,t.g=tc(t.l,n?e:null,!t.s),0<t.O&&(t.L=new js(yo(t.Ia,t,t.g),t.O)),Ks(t.V,t.g,"readystatechange",t.gb),e=t.H?Ro(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Xs(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function ba(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function wa(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=_a(t,n))==va){4==e&&(t.o=4,Zs(14),i=!1),Hs(t.j,t.m,null,"[Incomplete Response]");break}if(r==ya){t.o=4,Zs(15),Hs(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Hs(t.j,t.m,r,null),Na(t,r)}ba(t)&&r!=va&&r!=ya&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Zs(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hu(e),e.L=!0,Zs(11))):(Hs(t.j,t.m,n,"[Invalid Chunked Response]"),Aa(t),Sa(t))}function _a(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?va:(n=Number(e.substring(n,r)),isNaN(n)?ya:(r+=1)+n>e.length?va:(e=e.substr(r,n),t.C=r+n,e))}function Ea(t){t.Y=Date.now()+t.P,Ia(t,t.P)}function Ia(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ea(yo(t.eb,t),e)}function Ta(t){t.B&&(so.clearTimeout(t.B),t.B=null)}function Sa(t){0==t.l.G||t.I||$u(t.l,t)}function Aa(t){Ta(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ms(t.W),zs(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Na(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||su(n.i,t)))if(n.I=t.N,!t.J&&su(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Wu(n),Mu(n)}Gu(n),Zs(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ea(yo(n.ab,n),6e3));if(1>=ou(n.i)&&n.ka){try{n.ka()}catch(v){}n.ka=void 0}}else Xu(n,11)}else if((t.J||n.g==t)&&Wu(n),!To(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(No(l,"spdy")||No(l,"quic")||No(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(au(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ua(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Zu(r,r.H?r.la:null,r.W),p.J){uu(r.i,p);var d=p,y=r.K;y&&d.setTimeout(y),d.B&&(Ta(d),Ea(d)),r.g=p}else zu(r);0<n.l.length&&ju(n)}else"stop"!=o[0]&&"close"!=o[0]||Xu(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Xu(n,7):Fu(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Xs(4)}catch(v){}}function Da(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(uo(t)||"string"==typeof t)_o(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(uo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(uo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ca(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ca)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xa(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ka(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)ka(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function ka(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ro=fa.prototype).setTimeout=function(t){this.P=t},ro.gb=function(t){t=t.target;var e=this.L;e&&3==ku(t)?e.l():this.Ia(t)},ro.Ia=function(t){try{if(t==this.g)t:{var e=ku(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||qo||this.g&&(this.h.h||this.g.ga()||Ru(this.g)))){this.I||4!=e||7==n||Xs(8==n||0>=r?3:2),Ta(this);var i=this.g.ba();this.N=i;e:if(ba(this)){var o=Ru(this.g);t="";var s=o.length,a=4==ku(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Aa(this),Sa(this);var u="";break e}this.h.i=new so.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!To(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Zs(12),Aa(this),Sa(this);break t}Hs(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Na(this,i)}this.U?(wa(this,e,u),qo&&this.i&&3==e&&(Ks(this.V,this.W,"tick",this.fb),this.W.start())):(Hs(this.j,this.m,u,null),Na(this,u)),4==e&&Aa(this),this.i&&!this.I&&(4==e?$u(this.l,this):(this.i=!1,Ea(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Zs(12)):(this.o=0,Zs(13)),Aa(this),Sa(this)}}}catch(f){}},ro.fb=function(){if(this.g){var t=ku(this.g),e=this.g.ga();this.C<e.length&&(Ta(this),wa(this,t,e),this.i&&4!=t&&Ea(this))}},ro.cancel=function(){this.I=!0,Aa(this)},ro.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Xs(3),Zs(17)),Aa(this),this.o=2,Sa(this)):Ia(this,this.Y-t)},(ro=Ca.prototype).R=function(){xa(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},ro.T=function(){return xa(this),this.g.concat()},ro.get=function(t,e){return ka(this.h,t)?this.h[t]:e},ro.set=function(t,e){ka(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},ro.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ra=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oa(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Oa){this.g=void 0!==e?e:t.g,La(this,t.j),this.s=t.s,Fa(this,t.i),Ma(this,t.m),this.l=t.l,e=t.h;var n=new $a;n.i=e.i,e.g&&(n.g=new Ca(e.g),n.h=e.h),Va(this,n),this.o=t.o}else t&&(n=String(t).match(Ra))?(this.g=!!e,La(this,n[1]||"",!0),this.s=qa(n[2]||""),Fa(this,n[3]||"",!0),Ma(this,n[4]),this.l=qa(n[5]||"",!0),Va(this,n[6]||"",!0),this.o=qa(n[7]||"")):(this.g=!!e,this.h=new $a(null,this.g))}function Pa(t){return new Oa(t)}function La(t,e,n){t.j=n?qa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fa(t,e,n){t.i=n?qa(e,!0):e}function Ma(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Va(t,e,n){e instanceof $a?(t.h=e,function(t,e){e&&!t.j&&(Ya(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xa(this,e),Za(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Ba(e,Qa)),t.h=new $a(e,t.g))}function Ua(t,e,n){t.h.set(e,n)}function ja(t){return Ua(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function qa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ba(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ka),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ka(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Oa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ba(e,za,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ba(e,za,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ba(n,"/"==n.charAt(0)?Ha:Ga,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ba(n,Wa)),t.join("")};var za=/[#\/\?@]/g,Ga=/[#\?:]/g,Ha=/[#\?]/g,Qa=/[#\?@]/g,Wa=/#/g;function $a(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ya(t){t.g||(t.g=new Ca,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xa(t,e){Ya(t),e=tu(t,e),ka(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ka((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&xa(t)))}function Ja(t,e){return Ya(t),e=tu(t,e),ka(t.g.h,e)}function Za(t,e,n){Xa(t,e),0<n.length&&(t.i=null,t.g.set(tu(t,e),Io(n)),t.h+=n.length)}function tu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(ro=$a.prototype).add=function(t,e){Ya(this),this.i=null,t=tu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ro.forEach=function(t,e){Ya(this),this.g.forEach((function(n,r){_o(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ro.T=function(){Ya(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ro.R=function(t){Ya(this);var e=[];if("string"==typeof t)Ja(this,t)&&(e=Eo(e,this.g.get(tu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Eo(e,t[n])}return e},ro.set=function(t,e){return Ya(this),this.i=null,Ja(this,t=tu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ro.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},ro.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var eu=function(t,e){this.h=t,this.g=e};function nu(t){this.l=t||ru,so.PerformanceNavigationTiming?t=0<(t=so.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(so.g&&so.g.Ea&&so.g.Ea()&&so.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ru=10;function iu(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ou(t){return t.h?1:t.g?t.g.size:0}function su(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function au(t,e){t.g?t.g.add(e):t.h=e}function uu(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function cu(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=no(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Io(t.i)}function lu(){}function hu(){this.g=new lu}function fu(t,e,n){var r=n||"";try{Da(t,(function(t,n){var i=t;co(t)&&(i=Ss(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(db){throw e.push(r+"type="+encodeURIComponent("_badmap")),db}}function pu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function du(t){this.l=t.$b||null,this.j=t.ib||!1}function yu(t,e){Es.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=vu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nu.prototype.cancel=function(){var t,e;if(this.i=cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=no(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},lu.prototype.stringify=function(t){return so.JSON.stringify(t,void 0)},lu.prototype.parse=function(t){return so.JSON.parse(t,void 0)},go(du,ia),du.prototype.g=function(){return new yu(this.l,this.j)},du.prototype.i=function(t){return function(){return t}}({}),go(yu,Es);var vu=0;function gu(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function mu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bu(t)}function bu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ro=yu.prototype).open=function(t,e){if(this.readyState!=vu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bu(this)},ro.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||so).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ro.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mu(this)),this.readyState=vu},ro.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bu(this)),this.g&&(this.readyState=3,bu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==so.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gu(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},ro.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mu(this):bu(this),3==this.readyState&&gu(this)}},ro.Ua=function(t){this.g&&(this.response=this.responseText=t,mu(this))},ro.Ta=function(t){this.g&&(this.response=t,mu(this))},ro.ha=function(){this.g&&mu(this)},ro.setRequestHeader=function(t,e){this.v.append(t,e)},ro.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ro.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(yu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var wu=so.JSON.parse;function _u(t){Es.call(this),this.headers=new Ca,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Eu,this.K=this.L=!1}go(_u,Es);var Eu="",Iu=/^https?$/i,Tu=["POST","PUT"];function Su(t){return"content-type"==t.toLowerCase()}function Au(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Nu(t),Cu(t)}function Nu(t){t.D||(t.D=!0,Is(t,"complete"),Is(t,"error"))}function Du(t){if(t.h&&void 0!==oo&&(!t.C[1]||4!=ku(t)||2!=t.ba()))if(t.v&&4==ku(t))Vs(t.Fa,0,t);else if(Is(t,"readystatechange"),4==ku(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Ra)[1]||null;if(!o&&so.self&&so.self.location){var s=so.self.location.protocol;o=s.substr(0,s.length-1)}i=!Iu.test(o?o.toLowerCase():"")}e=i}if(e)Is(t,"complete"),Is(t,"success");else{t.m=6;try{var a=2<ku(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Nu(t)}}finally{Cu(t)}}}function Cu(t,e){if(t.g){xu(t);var n=t.g,r=t.C[0]?ao:null;t.g=null,t.C=null,e||Is(t,"ready");try{n.onreadystatechange=r}catch(db){}}}function xu(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(so.clearTimeout(t.A),t.A=null)}function ku(t){return t.g?t.g.readyState:0}function Ru(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Eu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ou(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ko(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ua(t,e,n))}function Pu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Lu(t){this.za=0,this.l=[],this.h=new Gs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Pu("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Pu("baseRetryDelayMs",5e3,t),this.$a=Pu("retryDelaySeedMs",1e4,t),this.Ya=Pu("forwardChannelMaxRetries",2,t),this.ra=Pu("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new nu(t&&t.concurrentRequestLimit),this.Ca=new hu,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Fu(t){if(Vu(t),3==t.G){var e=t.V++,n=Pa(t.F);Ua(n,"SID",t.J),Ua(n,"RID",e),Ua(n,"TYPE","terminate"),Bu(t,n),(e=new fa(t,t.h,e,void 0)).K=2,e.v=ja(Pa(n)),n=!1,so.navigator&&so.navigator.sendBeacon&&(n=so.navigator.sendBeacon(e.v.toString(),"")),!n&&so.Image&&((new Image).src=e.v,n=!0),n||(e.g=tc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ea(e)}Ju(t)}function Mu(t){t.g&&(Hu(t),t.g.cancel(),t.g=null)}function Vu(t){Mu(t),t.u&&(so.clearTimeout(t.u),t.u=null),Wu(t),t.i.cancel(),t.m&&("number"==typeof t.m&&so.clearTimeout(t.m),t.m=null)}function Uu(t,e){t.l.push(new eu(t.Za++,e)),3==t.G&&ju(t)}function ju(t){iu(t.i)||t.m||(t.m=!0,Rs(t.Ha,t),t.C=0)}function qu(t,e){var n;n=e?e.m:t.V++;var r=Pa(t.F);Ua(r,"SID",t.J),Ua(r,"RID",n),Ua(r,"AID",t.U),Bu(t,r),t.o&&t.s&&Ou(r,t.o,t.s),n=new fa(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ku(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),au(t.i,n),ga(n,r,e)}function Bu(t,e){t.j&&Da({},(function(t,n){Ua(e,n,t)}))}function Ku(t,e,n){n=Math.min(t.l.length,n);var r=t.j?yo(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{fu(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function zu(t){t.g||t.u||(t.Y=1,Rs(t.Ga,t),t.A=0)}function Gu(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ea(yo(t.Ga,t),Yu(t,t.A)),t.A++,!0)}function Hu(t){null!=t.B&&(so.clearTimeout(t.B),t.B=null)}function Qu(t){t.g=new fa(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Pa(t.oa);Ua(e,"RID","rpc"),Ua(e,"SID",t.J),Ua(e,"CI",t.N?"0":"1"),Ua(e,"AID",t.U),Bu(t,e),Ua(e,"TYPE","xmlhttp"),t.o&&t.s&&Ou(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ja(Pa(e)),n.s=null,n.U=!0,ma(n,t)}function Wu(t){null!=t.v&&(so.clearTimeout(t.v),t.v=null)}function $u(t,e){var n=null;if(t.g==e){Wu(t),Hu(t),t.g=null;var r=2}else{if(!su(t.i,e))return;n=e.D,uu(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Is(r=$s(),new ta(r,n,e,i)),ju(t)}else zu(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ou(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ea(yo(t.Ha,t,e),Yu(t,t.C)),t.C++,0)))}(t,e)||2==r&&Gu(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Xu(t,5);break;case 4:Xu(t,10);break;case 3:Xu(t,6);break;default:Xu(t,2)}}function Yu(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Xu(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=yo(t.jb,t);n||(n=new Oa("//www.google.com/images/cleardot.gif"),so.location&&"http"==so.location.protocol||La(n,"https"),ja(n)),function(t,e){var n=new Gs;if(so.Image){var r=new Image;r.onload=vo(pu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vo(pu,n,r,"TestLoadImage: error",!1,e),r.onabort=vo(pu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vo(pu,n,r,"TestLoadImage: timeout",!1,e),so.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zs(2);t.G=0,t.j&&t.j.va(e),Ju(t),Vu(t)}function Ju(t){t.G=0,t.I=-1,t.j&&(0==cu(t.i).length&&0==t.l.length||(t.i.i.length=0,Io(t.l),t.l.length=0),t.j.ua())}function Zu(t,e,n){var r=function(t){return t instanceof Oa?Pa(t):new Oa(t,void 0)}(n);if(""!=r.i)e&&Fa(r,e+"."+r.i),Ma(r,r.m);else{var i=so.location;r=function(t,e,n,r){var i=new Oa(null,void 0);return t&&La(i,t),e&&Fa(i,e),n&&Ma(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ko(t.aa,(function(t,e){Ua(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ua(r,e,n),Ua(r,"VER",t.ma),Bu(t,r),r}function tc(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new _u(new du({ib:!0})):new _u(t.qa)).L=t.H,e}function ec(){}function nc(){if(Uo&&!(10<=Number(Jo)))throw Error("Environmental error: no available transport.")}function rc(t,e){Es.call(this),this.g=new Lu(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!To(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!To(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new sc(this)}function ic(t){ca.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function oc(){la.call(this),this.status=1}function sc(t){this.g=t}(ro=_u.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():aa.g(),this.C=this.u?oa(this.u):oa(aa),this.g.onreadystatechange=yo(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Au(this,o)}t=n||"";var i=new Ca(this.headers);r&&Da(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Su,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=so.FormData&&t instanceof so.FormData,!(0<=wo(Tu,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xu(this),0<this.B&&((this.K=function(t){return Uo&&Yo()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yo(this.pa,this)):this.A=Vs(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Au(this,o)}},ro.pa=function(){void 0!==oo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Is(this,"timeout"),this.abort(8))},ro.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Is(this,"complete"),Is(this,"abort"),Cu(this))},ro.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cu(this,!0)),_u.Z.M.call(this)},ro.Fa=function(){this.s||(this.F||this.v||this.l?Du(this):this.cb())},ro.cb=function(){Du(this)},ro.ba=function(){try{return 2<ku(this)?this.g.status:-1}catch(Mo){return-1}},ro.ga=function(){try{return this.g?this.g.responseText:""}catch(Mo){return""}},ro.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wu(e)}},ro.Da=function(){return this.m},ro.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ro=Lu.prototype).ma=8,ro.G=1,ro.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},ro.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new fa(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Po(n=Ro(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Ku(this,e,r),Ua(i=Pa(this.F),"RID",t),Ua(i,"CVER",22),this.D&&Ua(i,"X-HTTP-Session-Id",this.D),Bu(this,i),this.o&&n&&Ou(i,this.o,n),au(this.i,e),this.Ra&&Ua(i,"TYPE","init"),this.ja?(Ua(i,"$req",r),Ua(i,"SID","null"),e.$=!0,ga(e,i,null)):ga(e,i,r),this.G=2}}else 3==this.G&&(t?qu(this,t):0==this.l.length||iu(this.i)||qu(this))},ro.Ga=function(){if(this.u=null,Qu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ea(yo(this.bb,this),t)}},ro.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zs(10),Mu(this),Qu(this))},ro.ab=function(){null!=this.v&&(this.v=null,Mu(this),Gu(this),Zs(19))},ro.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Zs(2)):(this.h.info("Failed to ping google.com"),Zs(1))},(ro=ec.prototype).xa=function(){},ro.wa=function(){},ro.va=function(){},ro.ua=function(){},ro.Oa=function(){},nc.prototype.g=function(t,e){return new rc(t,e)},go(rc,Es),rc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Rs(yo(t.hb,t,e))),Zs(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Zu(t,null,t.W),ju(t)},rc.prototype.close=function(){Fu(this.g)},rc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Uu(this.g,e)}else this.v?((e={}).__data__=Ss(t),Uu(this.g,e)):Uu(this.g,t)},rc.prototype.M=function(){this.g.j=null,delete this.j,Fu(this.g),delete this.g,rc.Z.M.call(this)},go(ic,ca),go(oc,la),go(sc,ec),sc.prototype.xa=function(){Is(this.g,"a")},sc.prototype.wa=function(t){Is(this.g,new ic(t))},sc.prototype.va=function(t){Is(this.g,new oc(t))},sc.prototype.ua=function(){Is(this.g,"b")},nc.prototype.createWebChannel=nc.prototype.g,rc.prototype.send=rc.prototype.u,rc.prototype.open=rc.prototype.m,rc.prototype.close=rc.prototype.close,na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,ra.COMPLETE="complete",sa.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",Es.prototype.listen=Es.prototype.N,_u.prototype.listenOnce=_u.prototype.O,_u.prototype.getLastError=_u.prototype.La,_u.prototype.getLastErrorCode=_u.prototype.Da,_u.prototype.getStatus=_u.prototype.ba,_u.prototype.getResponseJson=_u.prototype.Qa,_u.prototype.getResponseText=_u.prototype.ga,_u.prototype.send=_u.prototype.ea;var ac=na,uc=ra,cc=Qs,lc=10,hc=11,fc=du,pc=sa,dc=_u,yc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();yc.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return oi(e,t),e}(Error),mc=new Ui("@firebase/firestore");function bc(){return mc.logLevel}function wc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(mc.logLevel<=ki.DEBUG){var r=e.map(Ic);mc.debug.apply(mc,hi(["Firestore (8.8.1): "+t],r))}}function _c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(mc.logLevel<=ki.ERROR){var r=e.map(Ic);mc.error.apply(mc,hi(["Firestore (8.8.1): "+t],r))}}function Ec(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(mc.logLevel<=ki.WARN){var r=e.map(Ic);mc.warn.apply(mc,hi(["Firestore (8.8.1): "+t],r))}}function Ic(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw _c(e),new Error(e)}function Sc(t,e){t||Tc()}function Ac(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Nc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Cc(t,e){return t<e?-1:t>e?1:0}function xc(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function kc(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new gc(vc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new gc(vc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new gc(vc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gc(vc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Cc(this.nanoseconds,t.nanoseconds):Cc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Oc=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Rc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Tc(),void 0===n?n=t.length-e:n>t.length-e&&Tc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Vc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new gc(vc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Mc),Uc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Uc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new gc(vc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new gc(vc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new gc(vc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new gc(vc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Mc),qc=function(){function t(t){this.fields=t,t.sort(jc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return xc(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Bc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Cc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Bc.EMPTY_BYTE_STRING=new Bc("");var Kc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zc(t){if(Sc(!!t),"string"==typeof t){var e=0,n=Kc.exec(t);if(Sc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gc(t.seconds),nanos:Gc(t.nanos)}}function Gc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Hc(t){return"string"==typeof t?Bc.fromBase64String(t):Bc.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wc(t){var e=t.mapValue.fields.__previous_value__;return Qc(e)?Wc(e):e}function $c(t){var e=zc(t.mapValue.fields.__local_write_time__.timestampValue);return new Rc(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){return null==t}function Xc(t){return 0===t&&1/t==-1/0}function Jc(t){return"number"==typeof t&&Number.isInteger(t)&&!Xc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Vc.fromString(e))},t.fromName=function(e){return new t(Vc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Vc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Vc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Vc(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qc(t)?4:10:Tc()}function el(t,e){var n,r=tl(t);if(r!==tl(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $c(t).isEqual($c(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=zc(t.timestampValue),r=zc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Hc(t.bytesValue).isEqual(Hc(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Gc(t.geoPointValue.latitude)===Gc(e.geoPointValue.latitude)&&Gc(t.geoPointValue.longitude)===Gc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Gc(t.integerValue)===Gc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Gc(t.doubleValue),r=Gc(e.doubleValue);return n===r?Xc(n)===Xc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return xc(t.arrayValue.values||[],e.arrayValue.values||[],el);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Pc(n)!==Pc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!el(n[i],r[i])))return!1;return!0}(t,e);default:return Tc()}}function nl(t,e){return void 0!==(t.values||[]).find((function(t){return el(t,e)}))}function rl(t,e){var n,r,i,o,s=tl(t),a=tl(e);if(s!==a)return Cc(s,a);switch(s){case 0:return 0;case 1:return Cc(t.booleanValue,e.booleanValue);case 2:return r=e,i=Gc((n=t).integerValue||n.doubleValue),o=Gc(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return il(t.timestampValue,e.timestampValue);case 4:return il($c(t),$c(e));case 5:return Cc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Hc(t),r=Hc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Cc(n[i],r[i]);if(0!==o)return o}return Cc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Cc(Gc(t.latitude),Gc(e.latitude));return 0!==n?n:Cc(Gc(t.longitude),Gc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=rl(n[i],r[i]);if(o)return o}return Cc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Cc(r[s],o[s]);if(0!==a)return a;var u=rl(n[r[s]],i[o[s]]);if(0!==u)return u}return Cc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Tc()}}function il(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Cc(t,e);var n=zc(t),r=zc(e),i=Cc(n.seconds,r.seconds);return 0!==i?i:Cc(n.nanos,r.nanos)}function ol(t){return sl(t)}function sl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=zc(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?Hc(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Zc.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=sl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+sl(t.fields[o])}return e+"}"}(t.mapValue):Tc();var e,n,r,i}function al(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ul(t){return!!t&&"integerValue"in t}function cl(t){return!!t&&"arrayValue"in t}function ll(t){return!!t&&"nullValue"in t}function hl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fl(t){return!!t&&"mapValue"in t}function pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Lc(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=pl(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pl(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!fl(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=pl(e)},t.prototype.setAll=function(t){var e=this,n=jc.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=pl(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());fl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return el(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];fl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Lc(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(pl(this.value))},t}();function yl(t){var e=[];return Lc(t.fields,(function(t,n){var r=new jc([t]);if(fl(n)){var i=yl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new qc(e)}var vl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Oc.min(),dl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,dl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,dl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=dl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=dl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),gl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new gl(t,e,n,r,i,o,s)}function bl(t){var e=Ac(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+ol(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),Yc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Rl(e.startAt)),e.endAt&&(n+="|ub:",n+=Rl(e.endAt)),e.h=n}return e.h}function wl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Pl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!el(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fl(t.startAt,e.startAt)&&Fl(t.endAt,e.endAt)}function _l(t){return Zc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var El=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return oi(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Il(t,n,r):"array-contains"===n?new Nl(t,r):"in"===n?new Dl(t,r):"not-in"===n?new Cl(t,r):"array-contains-any"===n?new xl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Tl(t,n):new Sl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(rl(e,this.value)):null!==e&&tl(this.value)===tl(e)&&this.m(rl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Tc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Il=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Zc.fromName(r.referenceValue),i}return oi(e,t),e.prototype.matches=function(t){var e=Zc.comparator(t.key,this.key);return this.m(e)},e}(El),Tl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Al("in",n),r}return oi(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(El),Sl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Al("not-in",n),r}return oi(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(El);function Al(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Zc.fromName(t.referenceValue)}))}var Nl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return oi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return cl(e)&&nl(e.arrayValue,this.value)},e}(El),Dl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return oi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&nl(this.value.arrayValue,e)},e}(El),Cl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return oi(e,t),e.prototype.matches=function(t){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!nl(this.value.arrayValue,e)},e}(El),xl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return oi(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!cl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return nl(e.value.arrayValue,t)}))},e}(El),kl=function(t,e){this.position=t,this.before=e};function Rl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ol(t)})).join(",")}var Ol=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Pl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ll(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Zc.comparator(Zc.fromName(s.referenceValue),n.key):rl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Fl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!el(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ml=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Vl(t,e,n,r,i,o,s,a){return new Ml(t,e,n,r,i,o,s,a)}function Ul(t){return new Ml(t)}function jl(t){return!Yc(t.limit)&&"F"===t.limitType}function ql(t){return!Yc(t.limit)&&"L"===t.limitType}function Bl(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Kl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function zl(t){return null!==t.collectionGroup}function Gl(t){var e=Ac(t);if(null===e.p){e.p=[];var n=Kl(e),r=Bl(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ol(n)),e.p.push(new Ol(jc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ol(jc.keyField(),u))}}}return e.p}function Hl(t){var e=Ac(t);if(!e.T)if("F"===e.limitType)e.T=ml(e.path,e.collectionGroup,Gl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Gl(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ol(o.field,s))}var a=e.endAt?new kl(e.endAt.position,!e.endAt.before):null,u=e.startAt?new kl(e.startAt.position,!e.startAt.before):null;e.T=ml(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Ql(t,e,n){return new Ml(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wl(t,e){return wl(Hl(t),Hl(e))&&t.limitType===e.limitType}function $l(t){return bl(Hl(t))+"|lt:"+t.limitType}function Yl(t){return"Query(target="+(e=Hl(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ol(e.value);var e})).join(", ")+"]"),Yc(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Rl(e.startAt)),e.endAt&&(n+=", endAt: "+Rl(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Xl(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Zc.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ll(t.startAt,Gl(t),e)||t.endAt&&Ll(t.endAt,Gl(t),e))}(t,e);var n,r,i}function Jl(t){return function(e,n){for(var r=!1,i=0,o=Gl(t);i<o.length;i++){var s=o[i],a=Zl(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Zl(t,e,n){var r,i,o,s,a=t.field.isKeyField()?Zc.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?rl(o,s):Tc());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return Tc()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(e)?"-0":e}}function eh(t){return{integerValue:""+t}}function nh(t,e){return Jc(e)?eh(e):th(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rh=function(){this._=void 0};function ih(t,e,n){return t instanceof ah?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof uh?ch(t,e):t instanceof lh?hh(t,e):function(t,e){var n=sh(t,e),r=ph(n)+ph(t.A);return ul(n)&&ul(t.A)?eh(r):th(t.R,r)}(t,e);var r,i,o}function oh(t,e,n){return t instanceof uh?ch(t,e):t instanceof lh?hh(t,e):n}function sh(t,e){return t instanceof fh?ul(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var ah=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e}(rh),uh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return oi(e,t),e}(rh);function ch(t,e){for(var n=dh(e),r=function(t){n.some((function(e){return el(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var lh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return oi(e,t),e}(rh);function hh(t,e){for(var n=dh(e),r=function(t){n=n.filter((function(e){return!el(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var fh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return oi(e,t),e}(rh);function ph(t){return Gc(t.integerValue||t.doubleValue)}function dh(t){return cl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yh=function(t,e){this.field=t,this.transform=e},vh=function(t,e){this.version=t,this.transformResults=e},gh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function mh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var bh=function(){};function wh(t,e,n){var r,i,o,s,a;t instanceof Sh?(i=e,o=n,s=(r=t).value.clone(),a=Dh(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof Ah?function(t,e,n){if(mh(t.precondition,e)){var r=Dh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Nh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function _h(t,e,n){var r;t instanceof Sh?function(t,e,n){if(mh(t.precondition,e)){var r=t.value.clone(),i=Ch(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Th(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Ah?function(t,e,n){if(mh(t.precondition,e)){var r=Ch(t.fieldTransforms,n,e),i=e.data;i.setAll(Nh(t)),i.setAll(r),e.convertToFoundDocument(Th(e),i).setHasLocalMutations()}}(t,e,n):(r=e,mh(t.precondition,r)&&r.convertToNoDocument(Oc.min()))}function Eh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=sh(o.transform,s||null);null!=a&&(null==n&&(n=dl.empty()),n.set(o.field,a))}return n||null}function Ih(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&xc(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof uh&&o instanceof uh||i instanceof lh&&o instanceof lh?xc(i.elements,o.elements,el):i instanceof fh&&o instanceof fh?el(i.A,o.A):i instanceof ah&&o instanceof ah);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function Th(t){return t.isFoundDocument()?t.version:Oc.min()}var Sh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return oi(e,t),e}(bh),Ah=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return oi(e,t),e}(bh);function Nh(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Dh(t,e,n){var r=new Map;Sc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,oh(s,a,n[i]))}return r}function Ch(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ih(a,u,e))}return r}var xh,kh,Rh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return oi(e,t),e}(bh),Oh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return oi(e,t),e}(bh),Ph=function(t){this.count=t};function Lh(t){switch(t){case vc.OK:return Tc();case vc.CANCELLED:case vc.UNKNOWN:case vc.DEADLINE_EXCEEDED:case vc.RESOURCE_EXHAUSTED:case vc.INTERNAL:case vc.UNAVAILABLE:case vc.UNAUTHENTICATED:return!1;case vc.INVALID_ARGUMENT:case vc.NOT_FOUND:case vc.ALREADY_EXISTS:case vc.PERMISSION_DENIED:case vc.FAILED_PRECONDITION:case vc.ABORTED:case vc.OUT_OF_RANGE:case vc.UNIMPLEMENTED:case vc.DATA_LOSS:return!0;default:return Tc()}}function Fh(t){if(void 0===t)return _c("GRPC error has no .code"),vc.UNKNOWN;switch(t){case xh.OK:return vc.OK;case xh.CANCELLED:return vc.CANCELLED;case xh.UNKNOWN:return vc.UNKNOWN;case xh.DEADLINE_EXCEEDED:return vc.DEADLINE_EXCEEDED;case xh.RESOURCE_EXHAUSTED:return vc.RESOURCE_EXHAUSTED;case xh.INTERNAL:return vc.INTERNAL;case xh.UNAVAILABLE:return vc.UNAVAILABLE;case xh.UNAUTHENTICATED:return vc.UNAUTHENTICATED;case xh.INVALID_ARGUMENT:return vc.INVALID_ARGUMENT;case xh.NOT_FOUND:return vc.NOT_FOUND;case xh.ALREADY_EXISTS:return vc.ALREADY_EXISTS;case xh.PERMISSION_DENIED:return vc.PERMISSION_DENIED;case xh.FAILED_PRECONDITION:return vc.FAILED_PRECONDITION;case xh.ABORTED:return vc.ABORTED;case xh.OUT_OF_RANGE:return vc.OUT_OF_RANGE;case xh.UNIMPLEMENTED:return vc.UNIMPLEMENTED;case xh.DATA_LOSS:return vc.DATA_LOSS;default:return Tc()}}(kh=xh||(xh={}))[kh.OK=0]="OK",kh[kh.CANCELLED=1]="CANCELLED",kh[kh.UNKNOWN=2]="UNKNOWN",kh[kh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kh[kh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kh[kh.NOT_FOUND=5]="NOT_FOUND",kh[kh.ALREADY_EXISTS=6]="ALREADY_EXISTS",kh[kh.PERMISSION_DENIED=7]="PERMISSION_DENIED",kh[kh.UNAUTHENTICATED=16]="UNAUTHENTICATED",kh[kh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kh[kh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kh[kh.ABORTED=10]="ABORTED",kh[kh.OUT_OF_RANGE=11]="OUT_OF_RANGE",kh[kh.UNIMPLEMENTED=12]="UNIMPLEMENTED",kh[kh.INTERNAL=13]="INTERNAL",kh[kh.UNAVAILABLE=14]="UNAVAILABLE",kh[kh.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mh=function(){function t(t,e){this.comparator=t,this.root=e||Uh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Uh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Uh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Vh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Vh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Vh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Vh(this.root,t,this.comparator,!0)},t}(),Vh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Uh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Tc();if(this.right.isRed())throw Tc();var t=this.left.check();if(t!==this.right.check())throw Tc();return t+(this.isRed()?0:1)},t}();Uh.EMPTY=null,Uh.RED=!0,Uh.BLACK=!1,Uh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Tc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Tc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Tc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Tc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Tc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Uh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jh=function(){function t(t){this.comparator=t,this.data=new Mh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new qh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new qh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),qh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Bh=new Mh(Zc.comparator);function Kh(){return Bh}var zh=new Mh(Zc.comparator);function Gh(){return zh}var Hh=new Mh(Zc.comparator);var Qh=new jh(Zc.comparator);function Wh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Qh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var $h=new jh(Cc);function Yh(){return $h}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Oc.min(),r,Yh(),Kh(),Wh())},t}(),Jh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Bc.EMPTY_BYTE_STRING,n,Wh(),Wh(),Wh())},t}(),Zh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},tf=function(t,e){this.targetId=t,this.V=e},ef=function(t,e,n,r){void 0===n&&(n=Bc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},nf=function(){function t(){this.S=0,this.D=sf(),this.C=Bc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Wh(),e=Wh(),n=Wh();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Tc()}})),new Jh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=sf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),rf=function(){function t(t){this.W=t,this.G=new Map,this.H=Kh(),this.J=of(),this.Y=new jh(Cc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Tc()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(_l(i))if(0===n){var o=new Zc(i.path);this.tt(e,o,vl.newNoDocument(o,Oc.min()))}else Sc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&_l(o.target)){var s=new Zc(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,vl.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Wh();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Xh(t,n,this.Y,this.H,r);return this.H=Kh(),this.J=of(),this.Y=new jh(Cc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new nf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new jh(Cc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||wc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new nf),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function of(){return new Mh(Zc.comparator)}function sf(){return new Mh(Zc.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var af={asc:"ASCENDING",desc:"DESCENDING"},uf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cf=function(t,e){this.databaseId=t,this.I=e};function lf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function hf(t,e){return t.I?e.toBase64():e.toUint8Array()}function ff(t,e){return lf(t,e.toTimestamp())}function pf(t){return Sc(!!t),Oc.fromTimestamp((e=zc(t),new Rc(e.seconds,e.nanos)));var e}function df(t,e){return(n=t,new Vc(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function yf(t){var e=Vc.fromString(t);return Sc(Vf(e)),e}function vf(t,e){return df(t.databaseId,e.path)}function gf(t,e){var n=yf(e);if(n.get(1)!==t.databaseId.projectId)throw new gc(vc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new gc(vc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Zc(_f(n))}function mf(t,e){return df(t.databaseId,e)}function bf(t){var e=yf(t);return 4===e.length?Vc.emptyPath():_f(e)}function wf(t){return new Vc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _f(t){return Sc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ef(t,e,n){return{name:vf(t,e),fields:n.value.mapValue.fields}}function If(t,e){var n,r,i;if(e instanceof Sh)n={update:Ef(t,e.key,e.value)};else if(e instanceof Rh)n={delete:vf(t,e.key)};else if(e instanceof Ah)n={update:Ef(t,e.key,e.data),updateMask:Mf(e.fieldMask)};else{if(!(e instanceof Oh))return Tc();n={verify:vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ah)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof uh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof lh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Tc()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:ff(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Tc())),n}function Tf(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?gh.updateTime(pf(n.updateTime)):void 0!==n.exists?gh.exists(n.exists):gh.none():gh.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Sc("REQUEST_TIME"===e.setToServerValue),n=new ah;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new uh(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new lh(i)}else"increment"in e?n=new fh(t,e.increment):Tc();var o=jc.fromServerFormat(e.fieldPath);return new yh(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=gf(t,e.update.name),s=new dl({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new qc(e.map((function(t){return jc.fromServerFormat(t)})))}(e.updateMask);return new Ah(o,s,a,r,i)}return new Sh(o,s,r,i)}if(e.delete){var u=gf(t,e.delete);return new Rh(u,r)}if(e.verify){var c=gf(t,e.verify);return new Oh(c,r)}return Tc()}function Sf(t,e){return{documents:[mf(t,e.path)]}}function Af(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=mf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=mf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(hl(t.value))return{unaryFilter:{field:Of(t.field),op:"IS_NAN"}};if(ll(t.value))return{unaryFilter:{field:Of(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(hl(t.value))return{unaryFilter:{field:Of(t.field),op:"IS_NOT_NAN"}};if(ll(t.value))return{unaryFilter:{field:Of(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Of(t.field),op:Rf(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Of((e=t).field),direction:kf(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||Yc(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=Cf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Cf(e.endAt)),n}function Nf(t){var e=bf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Sc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Df(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Ol(Pf((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=Yc(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=xf(n.startAt));var f=null;return n.endAt&&(f=xf(n.endAt)),Vl(e,i,a,s,l,"F",h,f)}function Df(t){return t?void 0!==t.unaryFilter?[Ff(t)]:void 0!==t.fieldFilter?[Lf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Df(t)})).reduce((function(t,e){return t.concat(e)})):Tc():[]}function Cf(t){return{before:t.before,values:t.position}}function xf(t){var e=!!t.before,n=t.values||[];return new kl(n,e)}function kf(t){return af[t]}function Rf(t){return uf[t]}function Of(t){return{fieldPath:t.canonicalString()}}function Pf(t){return jc.fromServerFormat(t.fieldPath)}function Lf(t){return El.create(Pf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Tc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ff(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Pf(t.unaryFilter.field);return El.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Pf(t.unaryFilter.field);return El.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pf(t.unaryFilter.field);return El.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pf(t.unaryFilter.field);return El.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Tc()}}function Mf(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Vf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=qf(e)),e=jf(t.get(n),e);return qf(e)}function jf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function qf(t){return t+""}function Bf(t){var e=t.length;if(Sc(e>=2),2===e)return Sc(""===t.charAt(0)&&""===t.charAt(1)),Vc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Tc(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Tc()}o=s+2}return new Vc(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kf=function(t,e){this.seconds=t,this.nanoseconds=e},zf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};zf.store="owner",zf.key="owner";var Gf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Gf.store="mutationQueues",Gf.keyPath="userId";var Hf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hf.store="mutations",Hf.keyPath="batchId",Hf.userMutationsIndex="userMutationsIndex",Hf.userMutationsKeyPath=["userId","batchId"];var Qf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Uf(e)]},t.key=function(t,e,n){return[t,Uf(e),n]},t}();Qf.store="documentMutations",Qf.PLACEHOLDER=new Qf;var Wf=function(t,e){this.path=t,this.readTime=e},$f=function(t,e){this.path=t,this.version=e},Yf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Yf.store="remoteDocuments",Yf.readTimeIndex="readTimeIndex",Yf.readTimeIndexPath="readTime",Yf.collectionReadTimeIndex="collectionReadTimeIndex",Yf.collectionReadTimeIndexPath=["parentPath","readTime"];var Xf=function(t){this.byteSize=t};Xf.store="remoteDocumentGlobal",Xf.key="remoteDocumentGlobalKey";var Jf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Jf.store="targets",Jf.keyPath="targetId",Jf.queryTargetsIndexName="queryTargetsIndex",Jf.queryTargetsKeyPath=["canonicalId","targetId"];var Zf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Zf.store="targetDocuments",Zf.keyPath=["targetId","path"],Zf.documentTargetsIndex="documentTargetsIndex",Zf.documentTargetsKeyPath=["path","targetId"];var tp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};tp.key="targetGlobalKey",tp.store="targetGlobal";var ep=function(t,e){this.collectionId=t,this.parent=e};ep.store="collectionParents",ep.keyPath=["collectionId","parent"];var np=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};np.store="clientMetadata",np.keyPath="clientId";var rp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};rp.store="bundles",rp.keyPath="bundleId";var ip=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ip.store="namedQueries",ip.keyPath="name";var op=hi(hi([],hi(hi([],hi(hi([],hi(hi([],[Gf.store,Hf.store,Qf.store,Yf.store,Jf.store,zf.store,tp.store,Zf.store]),[np.store])),[Xf.store])),[ep.store])),[rp.store,ip.store]),sp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ap=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),up=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},cp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Tc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),lp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new up,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new pp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=mp(e.target.error);n.ft.reject(new pp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new pp(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(wc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new yp(e)},t}(),hp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(yi())&&_c("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return wc("SimpleDb","Removing database:",t),vp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=yi(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return ai(this,void 0,void 0,(function(){var e,n=this;return ui(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(wc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new pp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new gc(vc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new pp(t,n))},i.onupgradeneeded=function(t){wc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){wc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ai(this,void 0,void 0,(function(){var i,o,s,a,u;return ui(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return ui(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=lp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),cp.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,wc("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),fp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return vp(this.Pt.delete())},t}(),pp=function(t){function e(e,n){var r=this;return(r=t.call(this,vc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return oi(e,t),e}(gc);function dp(t){return"IndexedDbTransactionError"===t.name}var yp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(wc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(wc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),vp(n)},t.prototype.add=function(t){return wc("SimpleDb","ADD",this.store.name,t,t),vp(this.store.add(t))},t.prototype.get=function(t){var e=this;return vp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),wc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return wc("SimpleDb","DELETE",this.store.name,t),vp(this.store.delete(t))},t.prototype.count=function(){return wc("SimpleDb","COUNT",this.store.name),vp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){wc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new cp((function(n,r){e.onerror=function(t){var e=mp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new cp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new fp(i),s=e(i.primaryKey,i.value,o);if(s instanceof cp){var a=s.catch((function(t){return o.done(),cp.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return cp.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function vp(t){return new cp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=mp(t.target.error);n(e)}}))}var gp=!1;function mp(t){var e=hp._t(yi());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new gc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return gp||(gp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return oi(e,t),e}(ap);function wp(t,e){var n=Ac(t);return hp.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _p=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&wh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&_h(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&_h(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Oc.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Wh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&xc(this.mutations,t.mutations,(function(t,e){return Ih(t,e)}))&&xc(this.baseMutations,t.baseMutations,(function(t,e){return Ih(t,e)}))},t}(),Ep=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Sc(e.mutations.length===r.length);for(var i=Hh,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ip=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Oc.min()),void 0===o&&(o=Oc.min()),void 0===s&&(s=Bc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Tp=function(t){this.Lt=t};function Sp(t,e){if(e.document)return function(t,e,n){var r=gf(t,e.name),i=pf(e.updateTime),o=new dl({mapValue:{fields:e.fields}}),s=vl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Zc.fromSegments(e.noDocument.path),r=xp(e.noDocument.readTime),i=vl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Zc.fromSegments(e.unknownDocument.path);return r=xp(e.unknownDocument.version),vl.newUnknownDocument(o,r)}return Tc()}function Ap(t,e,n){var r,i,o=Np(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:vf(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:lf(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new Yf(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=Cp(e.version);return u=e.hasCommittedMutations,new Yf(null,new Wf(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=Cp(e.version);return new Yf(new $f(h,f),null,null,!0,o,s)}return Tc()}function Np(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dp(t){var e=new Rc(t[0],t[1]);return Oc.fromTimestamp(e)}function Cp(t){var e=t.toTimestamp();return new Kf(e.seconds,e.nanoseconds)}function xp(t){var e=new Rc(t.seconds,t.nanoseconds);return Oc.fromTimestamp(e)}function kp(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Tf(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Tf(t.Lt,e)})),a=Rc.fromMillis(e.localWriteTimeMs);return new _p(e.batchId,a,n,s)}function Rp(t){var e,n,r=xp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?xp(t.lastLimboFreeSnapshotVersion):Oc.min();return void 0!==t.query.documents?(Sc(1===(n=t.query).documents.length),e=Hl(Ul(bf(n.documents[0])))):e=Hl(Nf(t.query)),new Ip(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Bc.fromBase64String(t.resumeToken))}function Op(t,e){var n,r=Cp(e.snapshotVersion),i=Cp(e.lastLimboFreeSnapshotVersion);n=_l(e.target)?Sf(t.Lt,e.target):Af(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Jf(e.targetId,bl(e.target),r,o,e.sequenceNumber,i,n)}function Pp(t){var e=Nf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ql(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Fp(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:xp(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Fp(t).put({bundleId:(n=e).id,createTime:Cp(pf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Mp(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Pp(e.bundledQuery),readTime:xp(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Mp(t).put({name:(n=e).name,readTime:Cp(pf(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function Fp(t){return wp(t,rp.store)}function Mp(t){return wp(t,ip.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vp=function(){function t(){this.Bt=new Up}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),cp.resolve()},t.prototype.getCollectionParents=function(t,e){return cp.resolve(this.Bt.getEntries(e))},t}(),Up=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new jh(Vc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new jh(Vc.comparator)).toArray()},t}(),jp=function(){function t(){this.qt=new Up}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Uf(i)};return qp(t).put(o)}return cp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[kc(e),""],!1,!0);return qp(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Bf(o.parent))}return n}))},t}();function qp(t){return wp(t,ep.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t,e,n){var r=t.store(Hf.store),i=t.store(Qf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Sc(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Qf.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return cp.waitFor(o).next((function(){return c}))}function Gp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Tc();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kp.DEFAULT_COLLECTION_PERCENTILE=10,Kp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kp.DEFAULT=new Kp(41943040,Kp.DEFAULT_COLLECTION_PERCENTILE,Kp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kp.DISABLED=new Kp(-1,0,0);var Hp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Sc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wp(t).$t({index:Hf.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=$p(t),s=Wp(t);return s.add({}).next((function(a){Sc("number"==typeof a);for(var u=new _p(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return If(t.Lt,e)})),i=n.mutations.map((function(e){return If(t.Lt,e)}));return new Hf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new jh((function(t,e){return Cc(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],y=Qf.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,Qf.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),cp.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Wp(t).get(e).next((function(t){return t?(Sc(t.userId===n.userId),kp(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?cp.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Wp(t).$t({index:Hf.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Sc(e.batchId>=r),o=kp(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wp(t).$t({index:Hf.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wp(t).Nt(Hf.userMutationsIndex,n).next((function(t){return t.map((function(t){return kp(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Qf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return $p(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=Bf(u);if(a===n.userId&&e.path.isEqual(l))return Wp(t).get(c).next((function(t){if(!t)throw Tc();Sc(t.userId===n.userId),o.push(kp(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new jh(Cc),i=[];return e.forEach((function(e){var o=Qf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=$p(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Bf(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),cp.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Qf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new jh(Cc);return $p(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=Bf(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Wp(t).get(e).next((function(t){if(null===t)throw Tc();Sc(t.userId===n.userId),r.push(kp(n.R,t))})))})),cp.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return zp(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),cp.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return cp.resolve();var r=IDBKeyRange.lowerBound(Qf.prefixForUser(e.userId)),i=[];return $p(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Bf(t[1]);i.push(o)}else r.done()})).next((function(){Sc(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Qp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Yp(t).get(this.userId).next((function(t){return t||new Gf(e.userId,-1,"")}))},t}();function Qp(t,e,n){var r=Qf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return $p(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Wp(t){return wp(t,Hf.store)}function $p(t){return wp(t,Qf.store)}function Yp(t){return wp(t,Gf.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xp=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Jp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Xp(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Oc.fromTimestamp(new Rc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Zp(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Sc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Zp(t).$t((function(s,a){var u=Rp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return cp.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Zp(t).$t((function(t,n){var r=Rp(n);e(r)}))},t.prototype.Xt=function(t){return td(t).get(tp.key).next((function(t){return Sc(null!==t),t}))},t.prototype.Zt=function(t,e){return td(t).put(tp.key,e)},t.prototype.te=function(t,e){return Zp(t).put(Op(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=bl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Zp(t).$t({range:r,index:Jf.queryTargetsIndexName},(function(t,n,r){var o=Rp(n);wl(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=ed(t);return e.forEach((function(e){var s=Uf(e.path);i.push(o.put(new Zf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),cp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=ed(t);return cp.forEach(e,(function(e){var o=Uf(e.path);return cp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ed(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ed(t),i=Wh();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Bf(t[1]),o=new Zc(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Uf(e.path),r=IDBKeyRange.bound([n],[kc(n)],!1,!0),i=0;return ed(t).$t({index:Zf.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Zp(t).get(e).next((function(t){return t?Rp(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){return wp(t,Jf.store)}function td(t){return wp(t,tp.store)}function ed(t){return wp(t,Zf.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){return ai(this,void 0,void 0,(function(){return ui(this,(function(e){if(t.code!==vc.FAILED_PRECONDITION||t.message!==sp)throw t;return wc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Cc(n,i);return 0===s?Cc(r,o):s}var id=function(){function t(t){this.ne=t,this.buffer=new jh(rd),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();rd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),od=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;wc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return ai(e,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return dp(e=n.sent())?(wc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,nd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),sd=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return cp.resolve(yc.o);var r=new id(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(wc("LruGarbageCollector","Garbage collection skipped; disabled"),cp.resolve(Bp)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(wc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Bp):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(wc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),bc()<=ki.DEBUG&&wc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),cp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),ad=function(){function t(t,e){this.db=t,this.garbageCollector=new sd(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ud(t,n)},t.prototype.removeReference=function(t,e,n){return ud(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ud(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,Yp(n=t).Ot((function(t){return Qp(n,t,r).next((function(t){return t&&(i=!0),cp.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),ed(t).delete([0,Uf(s.path)])}))}));i.push(u)}})).next((function(){return cp.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ud(t,e)},t.prototype.we=function(t,e){var n,r=ed(t),i=yc.o;return r.$t({index:Zf.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==yc.o&&e(new Zc(Bf(n)),i),i=a,n=s):i=yc.o})).next((function(){i!==yc.o&&e(new Zc(Bf(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ud(t,e){return ed(t).put((n=e,r=t.currentSequenceNumber,new Zf(0,Uf(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cd=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Lc(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Fc(this.inner)},t}(),ld=function(){function t(){this.changes=new cd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Oc.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:vl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?cp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),hd=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return dd(t).put(yd(e),n)},t.prototype.removeEntry=function(t,e){var n=dd(t),r=yd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return dd(t).get(yd(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return dd(t).get(yd(e)).next((function(t){return{document:n.ye(e,t),size:Gp(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Kh();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Kh(),i=new Mh(Zc.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Gp(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return cp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return dd(t).$t({range:r},(function(t,e,r){for(var s=Zc.fromSegments(t);o&&Zc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Kh(),o=e.path.length+1,s={};if(n.isEqual(Oc.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Np(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Yf.collectionReadTimeIndex}return dd(t).$t(s,(function(t,n,s){if(t.length===o){var a=Sp(r.R,n);e.path.isPrefixOf(a.key.path)?Xl(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new fd(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return pd(t).get(Xf.key).next((function(t){return Sc(!!t),t}))},t.prototype.me=function(t,e){return pd(t).put(Xf.key,e)},t.prototype.ye=function(t,e){if(e){var n=Sp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Oc.min()))return n}return vl.newInvalidDocument(t)},t}(),fd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new cd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return oi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new jh((function(t,e){return Cc(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Ap(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Gp(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Ap(e.Ie.R,vl.newNoDocument(o,Oc.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),cp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ld);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){return wp(t,Xf.store)}function dd(t){return wp(t,Yf.store)}function yd(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vd=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Sc(n<r&&n>=0&&r<=11);var o=new lp("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(zf.store),function(t){t.createObjectStore(Gf.store,{keyPath:Gf.keyPath}),t.createObjectStore(Hf.store,{keyPath:Hf.keyPath,autoIncrement:!0}).createIndex(Hf.userMutationsIndex,Hf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Qf.store)}(t),gd(t),function(t){t.createObjectStore(Yf.store)}(t));var s=cp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Zf.store),t.deleteObjectStore(Jf.store),t.deleteObjectStore(tp.store)}(t),gd(t)),s=s.next((function(){return function(t){var e=t.store(tp.store),n=new tp(0,0,Oc.min().toTimestamp(),0);return e.put(tp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Hf.store).Nt().next((function(n){t.deleteObjectStore(Hf.store),t.createObjectStore(Hf.store,{keyPath:Hf.keyPath,autoIncrement:!0}).createIndex(Hf.userMutationsIndex,Hf.userMutationsKeyPath,{unique:!0});var r=e.store(Hf.store),i=n.map((function(t){return r.put(t)}));return cp.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(np.store,{keyPath:np.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Xf.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Yf.store);e.createIndex(Yf.readTimeIndex,Yf.readTimeIndexPath,{unique:!1}),e.createIndex(Yf.collectionReadTimeIndex,Yf.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(rp.store,{keyPath:rp.keyPath})}(t),function(t){t.createObjectStore(ip.store,{keyPath:ip.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(Yf.store).$t((function(t,n){e+=Gp(n)})).next((function(){var n=new Xf(e);return t.store(Xf.store).put(Xf.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Gf.store),r=t.store(Hf.store);return n.Nt().next((function(n){return cp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Hf.userMutationsIndex,i).next((function(r){return cp.forEach(r,(function(r){Sc(r.userId===n.userId);var i=kp(e.R,r);return zp(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Zf.store),n=t.store(Yf.store);return t.store(tp.store).get(tp.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Vc(n),s=[0,Uf(o)];r.push(e.get(s).next((function(n){return n?cp.resolve():(r=o,e.put(new Zf(0,Uf(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return cp.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(ep.store,{keyPath:ep.keyPath});var n=e.store(ep.store),r=new Up,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Uf(i)})}};return e.store(Yf.store).$t({kt:!0},(function(t,e){var n=new Vc(t);return i(n.popLast())})).next((function(){return e.store(Qf.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Bf(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Jf.store);return n.$t((function(t,r){var i=Rp(r),o=Op(e.R,i);return n.put(o)}))},t}();function gd(t){t.createObjectStore(Zf.store,{keyPath:Zf.keyPath}).createIndex(Zf.documentTargetsIndex,Zf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Jf.store,{keyPath:Jf.keyPath}).createIndex(Jf.queryTargetsIndexName,Jf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(tp.store)}var md="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bd=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new gc(vc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new ad(this,i),this.Le=n+"main",this.R=new Tp(u),this.Be=new hp(this.Le,11,new vd(this.R)),this.qe=new Jp(this.referenceDelegate,this.R),this.Ut=new jp,this.Ue=(h=this.R,f=this.Ut,new hd(h,f)),this.Ke=new Lp,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&_c("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new gc(vc.FAILED_PRECONDITION,md);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new yc(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return ai(e,void 0,void 0,(function(){return ui(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return ai(e,void 0,void 0,(function(){return ui(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return ai(e,void 0,void 0,(function(){return ui(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return _d(e).put(new np(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(dp(e))return wc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return wc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return wd(t).get(zf.key).next((function(t){return cp.resolve(e.tn(t))}))},t.prototype.en=function(t){return _d(t).delete(this.clientId)},t.prototype.nn=function(){return ai(this,void 0,void 0,(function(){var t,e,n,r,i=this;return ui(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=wp(t,np.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return cp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?cp.resolve(!0):wd(t).get(zf.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new gc(vc.FAILED_PRECONDITION,md);return!1}}return!(!e.networkEnabled||!e.inForeground)||_d(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&wc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return ai(this,void 0,void 0,(function(){var t=this;return ui(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[zf.store,np.store],(function(e){var n=new bp(e,yc.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return _d(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Hp.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;wc("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,op,(function(o){return i=new bp(o,r.Ne?r.Ne.next():yc.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw _c("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new gc(vc.FAILED_PRECONDITION,sp);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return wd(t).get(zf.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new gc(vc.FAILED_PRECONDITION,md)}))},t.prototype.Ze=function(t){var e=new zf(this.clientId,this.allowTabSynchronization,Date.now());return wd(t).put(zf.key,e)},t.yt=function(){return hp.yt()},t.prototype.Xe=function(t){var e=this,n=wd(t);return n.get(zf.key).next((function(t){return e.tn(t)?(wc("IndexedDbPersistence","Releasing primary lease."),n.delete(zf.key)):cp.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(_c("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!vi()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return wc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return _c("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){_c("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function wd(t){return wp(t,zf.store)}function _d(t){return wp(t,np.store)}function Ed(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Id=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Zc.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):zl(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new Zc(e)).next((function(t){var e=Gh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Gh();return this.Ut.getCollectionParents(t,i).next((function(s){return cp.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new Ml(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=vl.newInvalidDocument(c),r=r.insert(c,l)),_h(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Xl(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Wh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ah&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Td=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Wh(),i=Wh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Sd=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Oc.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(jl(e)||ql(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(bc()<=ki.DEBUG&&wc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Yl(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new jh(Jl(t));return e.forEach((function(e,r){Xl(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return bc()<=ki.DEBUG&&wc("QueryEngine","Using full collection scan to execute query:",Yl(e)),this.Sn.getDocumentsMatchingQuery(t,e,Oc.min())},t}(),Ad=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Mh(Cc),this.kn=new cd((function(t){return bl(t)}),wl),this.$n=Oc.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Id(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,e,n,r){return new Ad(t,e,n,r)}function Dd(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o;return ui(this,(function(s){switch(s.label){case 0:return n=Ac(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Id(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Wh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var y=d[p];r.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Cd(t,e){var n=Ac(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=cp.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);Sc(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function xd(t){var e=Ac(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function kd(t,e){var n=Ac(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,Sc((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=Kh();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=Wh();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Kh();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Oc.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):wc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Oc.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return cp.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Rd(t,e){var n=Ac(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Od(t,e){var n=Ac(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,cp.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ip(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Pd(t,e,n){return ai(this,void 0,void 0,(function(){var r,i,o,s;return ui(this,(function(a){switch(a.label){case 0:r=Ac(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!dp(s=a.sent()))throw s;return wc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Ld(t,e,n){var r=Ac(t),i=Oc.min(),o=Wh();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=Hl(e),c=Ac(s),l=c.kn.get(u),void 0!==l?cp.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Oc.min(),n?o:Wh())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function Fd(t,e){var n=Ac(t),r=Ac(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Md(t){var e=Ac(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=Ac(n),s=Kh(),a=Np(i),u=dd(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:Yf.readTimeIndex,range:c},(function(t,e){var n=Sp(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:Dp(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Vd(t){return ai(this,void 0,void 0,(function(){var e;return ui(this,(function(n){return[2,(e=Ac(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=dd(t),n=Oc.min(),e.$t({index:Yf.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Dp(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ud=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return cp.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:pf(n.createTime)}),cp.resolve()},t.prototype.getNamedQuery=function(t,e){return cp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:Pp(n.bundledQuery),readTime:pf(n.readTime)}),cp.resolve();var n},t}(),jd=function(){function t(){this.Wn=new jh(qd.Gn),this.zn=new jh(qd.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new qd(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new qd(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Zc(new Vc([])),r=new qd(n,t),i=new qd(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Zc(new Vc([])),n=new qd(e,t),r=new qd(e,t+1),i=Wh();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new qd(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),qd=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Zc.comparator(t.key,e.key)||Cc(t.ns,e.ns)},t.Hn=function(t,e){return Cc(t.ns,e.ns)||Zc.comparator(t.key,e.key)},t}(),Bd=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new jh(qd.Gn)}return t.prototype.checkEmpty=function(t){return cp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new _p(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new qd(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return cp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return cp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return cp.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return cp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return cp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new qd(e,0),i=new qd(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),cp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new jh(Cc);return e.forEach((function(t){var e=new qd(t,0),i=new qd(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),cp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Zc.isDocumentKey(i)||(i=i.child(""));var o=new qd(new Zc(i),0),s=new jh(Cc);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),cp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Sc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return cp.forEach(e.mutations,(function(i){var o=new qd(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new qd(e,0),r=this.rs.firstAfterOrEqual(n);return cp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,cp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Kd=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Mh(Zc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return cp.resolve(n?n.document.clone():vl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Kh();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():vl.newInvalidDocument(t))})),cp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Kh(),i=new Zc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||Xl(e,c)&&(r=r.insert(c.key,c.clone()))}return cp.resolve(r)},t.prototype.fs=function(t,e){return cp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new zd(this)},t.prototype.getSize=function(t){return cp.resolve(this.size)},t}(),zd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return oi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),cp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ld),Gd=function(){function t(t){this.persistence=t,this.ds=new cd((function(t){return bl(t)}),wl),this.lastRemoteSnapshotVersion=Oc.min(),this.highestTargetId=0,this.ws=0,this._s=new jd,this.targetCount=0,this.ys=Xp.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),cp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return cp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return cp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),cp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),cp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Xp(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,cp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),cp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,cp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),cp.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return cp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return cp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),cp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),cp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),cp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return cp.resolve(n)},t.prototype.containsKey=function(t,e){return cp.resolve(this._s.containsKey(e))},t}(),Hd=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new yc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Gd(this),this.Ut=new Vp,this.Ue=(n=this.Ut,new Kd(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new Tp(e),this.Ke=new Ud(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Bd(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;wc("MemoryPersistence","Starting transaction:",t);var i=new Qd(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return cp.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Qd=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return oi(e,t),e}(ap),Wd=function(){function t(t){this.persistence=t,this.As=new jd,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Tc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),cp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),cp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),cp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cp.forEach(this.vs,(function(r){var i=Zc.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return cp.or([function(){return cp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),$d=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e){return"firestore_clients_"+t+"_"+e}function Xd(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Jd(t,e){return"firestore_targets_"+t+"_"+e}$d.UNAUTHENTICATED=new $d(null),$d.GOOGLE_CREDENTIALS=new $d("google-credentials-uid"),$d.FIRST_PARTY=new $d("first-party-uid");var Zd=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new gc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(_c("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ty=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gc(i.error.code,i.error.message)),o?new t(e,i.state,r):(_c("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ey=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Yh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Jc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(_c("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ny=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(_c("SharedClientState","Failed to parse online state: "+e),null)},t}(),ry=function(){function t(){this.activeTargetIds=Yh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),iy=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Mh(Cc),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Yd(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new ry),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ai(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return ui(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Yd(this.persistenceKey,r)))&&(o=ey.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Jd(this.persistenceKey,t));if(n){var r=ty.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Jd(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return wc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){wc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){wc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(wc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void _c("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return ai(e,void 0,void 0,(function(){var t,e,r,i,o,s;return ui(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=yc.o;if(null!=t)try{var n=JSON.parse(t);Sc("number"==typeof n),e=n}catch(r){_c("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==yc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Zd(this.currentUser,t,e,n),i=Xd(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Xd(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Jd(this.persistenceKey,t),i=new ty(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ey.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Zd.Vs(new $d(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return ty.Vs(r,e)},t.prototype.js=function(t){return ny.Vs(t)},t.prototype.ii=function(t){return ai(this,void 0,void 0,(function(){return ui(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(wc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Yh();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),oy=function(){function t(){this.li=new ry,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new ry,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),sy=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),ay=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){wc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){wc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),uy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},cy=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),ly=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return oi(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new dc;s.listenOnce(uc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case ac.NO_ERROR:var e=s.getResponseJson();wc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ac.TIMEOUT:wc("Connection",'RPC "'+t+'" timed out'),o(new gc(vc.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:var n=s.getStatus();if(wc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(vc).indexOf(c)>=0?c:vc.UNKNOWN);o(new gc(a,r.message))}else o(new gc(vc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new gc(vc.UNAVAILABLE,"Connection failed."));break;default:Tc()}}finally{wc("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new nc,s=$s(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new fc({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yi())||"object"==typeof navigator&&"ReactNative"===navigator.product||yi().indexOf("Electron/")>=0||((r=yi()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||yi().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");wc("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),l=!1,h=!1,f=new cy({Ei:function(t){h?wc("Connection","Not sending because WebChannel is closed:",t):(l||(wc("Connection","Opening WebChannel transport."),c.open(),l=!0),wc("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,pc.EventType.OPEN,(function(){h||wc("Connection","WebChannel transport opened.")})),p(c,pc.EventType.CLOSE,(function(){h||(h=!0,wc("Connection","WebChannel transport closed"),f.Vi())})),p(c,pc.EventType.ERROR,(function(t){h||(h=!0,Ec("Connection","WebChannel transport errored:",t),f.Vi(new gc(vc.UNAVAILABLE,"The operation could not be completed")))})),p(c,pc.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Sc(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){wc("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=xh[t];if(void 0!==e)return Fh(e)}(o),a=i.message;void 0===s&&(s=vc.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Vi(new gc(s,a)),c.close()}else wc("Connection","WebChannel received:",n),f.Si(n)}})),p(s,cc.STAT_EVENT,(function(t){t.stat===lc?wc("Connection","Detected buffering proxy"):t.stat===hc&&wc("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);wc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return wc("RestConnection","Received: ",t),t}),(function(e){throw Ec("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=uy[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){return"undefined"!=typeof window?window:null}function fy(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){return new cf(t,!0)}var dy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&wc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),yy=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new dy(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return ai(this,void 0,void 0,(function(){return ui(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return ai(this,void 0,void 0,(function(){return ui(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return ai(this,void 0,void 0,(function(){return ui(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===vc.RESOURCE_EXHAUSTED?(_c(e.toString()),_c("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===vc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new gc(vc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return ai(t,void 0,void 0,(function(){return ui(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return wc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(wc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),vy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return oi(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Tc(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Sc(void 0===e||"string"==typeof e),Bc.fromBase64String(e||"")):(Sc(void 0===e||e instanceof Uint8Array),Bc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?vc.UNKNOWN:Fh(t.code);return new gc(e,t.message||"")}(u);n=new ef(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=gf(t,i.document.name),s=pf(i.document.updateTime);var u=new dl({mapValue:{fields:i.document.fields}}),c=(a=vl.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new Zh(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=gf(t,i.document),s=i.readTime?pf(i.readTime):Oc.min(),u=vl.newNoDocument(o,s),a=i.removedTargetIds||[],n=new Zh([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=gf(t,i.document),s=i.removedTargetIds||[],n=new Zh([],s,o,null);else{if(!("filter"in e))return Tc();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new Ph(i),s=h.targetId,n=new tf(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Oc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Oc.min():e.readTime?pf(e.readTime):Oc.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=wf(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=_l(i)?{documents:Sf(e,i)}:{query:Af(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=hf(e,n.resumeToken):n.snapshotVersion.compareTo(Oc.min())>0&&(r.readTime=lf(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=wf(this.R),e.removeTarget=t,this.cr(e)},e}(yy),gy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return oi(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Sc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(Sc(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?pf(e.updateTime):pf(n)).isEqual(Oc.min())&&(r=pf(n)),new vh(r,e.transformResults||[]);var e,n,r}))):[]),n=pf(t.commitTime);return this.listener.Tr(n,e)}var r,i;return Sc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=wf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return If(e.R,t)}))};this.cr(n)},e}(yy),my=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return oi(e,t),e.prototype.br=function(){if(this.Rr)throw new gc(vc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===vc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new gc(vc.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===vc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new gc(vc.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),by=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(_c(e),this.Vr=!1):wc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),wy=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return ai(o,void 0,void 0,(function(){return ui(this,(function(t){switch(t.label){case 0:return Cy(this)?(wc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ai(this,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return(e=Ac(t)).Or.add(4),[4,Ey(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,_y(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new by(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t){return ai(this,void 0,void 0,(function(){var e,n;return ui(this,(function(r){switch(r.label){case 0:if(!Cy(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ey(t){return ai(this,void 0,void 0,(function(){var e,n;return ui(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Iy(t,e){var n=Ac(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Dy(n)?Ny(n):zy(n).er()&&Sy(n,e))}function Ty(t,e){var n=Ac(t),r=zy(n);n.$r.delete(e),r.er()&&Ay(n,e),0===n.$r.size&&(r.er()?r.ir():Cy(n)&&n.Br.set("Unknown"))}function Sy(t,e){t.qr.U(e.targetId),zy(t).mr(e)}function Ay(t,e){t.qr.U(e),zy(t).yr(e)}function Ny(t){t.qr=new rf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),zy(t).start(),t.Br.Sr()}function Dy(t){return Cy(t)&&!zy(t).tr()&&t.$r.size>0}function Cy(t){return 0===Ac(t).Or.size}function xy(t){t.qr=void 0}function ky(t){return ai(this,void 0,void 0,(function(){return ui(this,(function(e){return t.$r.forEach((function(e,n){Sy(t,e)})),[2]}))}))}function Ry(t,e){return ai(this,void 0,void 0,(function(){return ui(this,(function(n){return xy(t),Dy(t)?(t.Br.Nr(e),Ny(t)):t.Br.set("Unknown"),[2]}))}))}function Oy(t,e,n){return ai(this,void 0,void 0,(function(){var r,i,o;return ui(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof ef&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o;return ui(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),wc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Py(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Zh?t.qr.X(e):e instanceof tf?t.qr.rt(e):t.qr.et(e),n.isEqual(Oc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,xd(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(Bc.EMPTY_BYTE_STRING,e.snapshotVersion)),Ay(a,t);var n=new Ip(e.target,t,1,e.sequenceNumber);Sy(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return wc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Py(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function Py(t,e,n){return ai(this,void 0,void 0,(function(){var r=this;return ui(this,(function(i){switch(i.label){case 0:if(!dp(e))throw e;return t.Or.add(1),[4,Ey(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return xd(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return ai(r,void 0,void 0,(function(){return ui(this,(function(e){switch(e.label){case 0:return wc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,_y(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Ly(t,e){return e().catch((function(n){return Py(t,n,e)}))}function Fy(t){return ai(this,void 0,void 0,(function(){var e,n,r,i,o;return ui(this,(function(s){switch(s.label){case 0:e=Ac(t),n=Gy(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(Cy(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Rd(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Gy(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Py(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return My(e)&&Vy(e),[2]}var a}))}))}function My(t){return Cy(t)&&!Gy(t).tr()&&t.kr.length>0}function Vy(t){Gy(t).start()}function Uy(t){return ai(this,void 0,void 0,(function(){return ui(this,(function(e){return Gy(t).Ar(),[2]}))}))}function jy(t){return ai(this,void 0,void 0,(function(){var e,n,r,i;return ui(this,(function(o){for(e=Gy(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function qy(t,e,n){return ai(this,void 0,void 0,(function(){var r,i;return ui(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Ep.from(r,e,n),[4,Ly(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Fy(t)];case 2:return o.sent(),[2]}}))}))}function By(t,e){return ai(this,void 0,void 0,(function(){return ui(this,(function(n){switch(n.label){case 0:return e&&Gy(t).pr?[4,function(t,e){return ai(this,void 0,void 0,(function(){var n,r;return ui(this,(function(i){switch(i.label){case 0:return Lh(r=e.code)&&r!==vc.ABORTED?(n=t.kr.shift(),Gy(t).sr(),[4,Ly(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Fy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return My(t)&&Vy(t),[2]}}))}))}function Ky(t,e){return ai(this,void 0,void 0,(function(){var n;return ui(this,(function(r){switch(r.label){case 0:return n=Ac(t),e?(n.Or.delete(2),[4,_y(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Ey(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function zy(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:ky.bind(null,t),Ri:Ry.bind(null,t),_r:Oy.bind(null,t)},(i=Ac(e)).br(),new vy(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return ai(o,void 0,void 0,(function(){return ui(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),Dy(t)?Ny(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),xy(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function Gy(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:Uy.bind(null,t),Ri:By.bind(null,t),Ir:jy.bind(null,t),Tr:qy.bind(null,t)},(i=Ac(e)).br(),new gy(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return ai(o,void 0,void 0,(function(){return ui(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,Fy(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(wc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var Hy=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new up,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gc(vc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Qy(t,e){if(_c("AsyncQueue",e+": "+t),dp(t))return new gc(vc.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wy=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Zc.comparator(e.key,n.key)}:function(t,e){return Zc.comparator(t.key,e.key)},this.keyedMap=Gh(),this.sortedSet=new Mh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),$y=function(){function t(){this.Qr=new Mh(Zc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Tc():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Yy=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Wy.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Wl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Xy=function(){this.Wr=void 0,this.listeners=[]},Jy=function(){this.queries=new cd((function(t){return $l(t)}),Wl),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return ui(this,(function(c){switch(c.label){case 0:if(n=Ac(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Xy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Qy(a,"Initialization of query '"+Yl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&rv(n),[2]}}))}))}function tv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o,s;return ui(this,(function(a){return n=Ac(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function ev(t,e){for(var n=Ac(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&rv(n)}function nv(t,e,n){var r=Ac(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function rv(t){t.Gr.forEach((function(t){t.next()}))}var iv=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Yy(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Yy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ov=function(t){this.key=t},sv=function(t){this.key=t},av=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Wh(),this.mutatedKeys=Wh(),this.lo=Jl(t),this.fo=new Wy(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new $y,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=jl(this.query)&&i.size===this.query.limit?i.last():null,c=ql(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Xl(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),jl(this.query)||ql(this.query))for(;s.size>this.query.limit;){var l=jl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tc()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Yy(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new $y,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Wh(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new sv(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new ov(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Wh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Yy.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),uv=function(t,e,n){this.query=t,this.targetId=e,this.view=n},cv=function(t){this.key=t,this.bo=!1},lv=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new cd((function(t){return $l(t)}),Wl),this.Vo=new Map,this.So=new Set,this.Do=new Mh(Zc.comparator),this.Co=new Map,this.No=new jd,this.xo={},this.Fo=new Map,this.ko=Xp.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ui(this,(function(u){switch(u.label){case 0:return n=jv(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Od(n.localStore,Hl(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,fv(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Iy(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function fv(t,e,n,r){return ai(this,void 0,void 0,(function(){var i,o,s,a,u,c;return ui(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return ai(this,void 0,void 0,(function(){var i,o,s;return ui(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Ld(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Sv(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Ld(t.localStore,e,!0)];case 1:return i=l.sent(),o=new av(e,i.Bn),s=o._o(i.documents),a=Jh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Sv(t,n,u.To),c=new uv(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function pv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i;return ui(this,(function(o){switch(o.label){case 0:return n=Ac(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Wl(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Pd(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Ty(n.remoteStore,r.targetId),Iv(n,r.targetId)})).catch(nd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Iv(n,r.targetId),[4,Pd(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function dv(t,e,n){return ai(this,void 0,void 0,(function(){var r,i,o,s;return ui(this,(function(a){switch(a.label){case 0:r=qv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=Ac(u),f=Rc.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Wh()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Eh(o,l.get(o.key));null!=s&&n.push(new Ah(o.key,s,yl(s.value.mapValue),gh.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Mh(Cc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Dv(r,i.changes)];case 3:return a.sent(),[4,Fy(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Qy(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function yv(t,e){return ai(this,void 0,void 0,(function(){var n,r;return ui(this,(function(i){switch(i.label){case 0:n=Ac(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,kd(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Sc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Sc(r.bo):t.removedDocuments.size>0&&(Sc(r.bo),r.bo=!1))})),[4,Dv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,nd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function vv(t,e,n){var r=Ac(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ac(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&rv(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gv(t,e,n){return ai(this,void 0,void 0,(function(){var r,i,o,s,a,u;return ui(this,(function(c){switch(c.label){case 0:return(r=Ac(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Mh(Zc.comparator)).insert(o,vl.newNoDocument(o,Oc.min())),a=Wh().add(o),u=new Xh(Oc.min(),new Map,new jh(Cc),s,a),[4,yv(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Nv(r),[3,4];case 2:return[4,Pd(r.localStore,e,!1).then((function(){return Iv(r,e,n)})).catch(nd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function mv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i;return ui(this,(function(o){switch(o.label){case 0:n=Ac(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Cd(n.localStore,e)];case 2:return i=o.sent(),Ev(n,r,null),_v(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Dv(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,nd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function bv(t,e,n){return ai(this,void 0,void 0,(function(){var r,i;return ui(this,(function(o){switch(o.label){case 0:r=Ac(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=Ac(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return Sc(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),Ev(r,e,n),_v(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Dv(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,nd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function wv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o,s;return ui(this,(function(a){switch(a.label){case 0:Cy((n=Ac(t)).remoteStore)||wc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=Ac(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Qy(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function _v(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Ev(t,e,n){var r=Ac(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Iv(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Tv(t,e)}))}function Tv(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ty(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Nv(t))}function Sv(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ov?(t.No.addReference(o.key,e),Av(t,o)):o instanceof sv?(wc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Tv(t,o.key)):Tc()}}function Av(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(wc("SyncEngine","New document in limbo: "+n),t.So.add(r),Nv(t))}function Nv(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Zc(Vc.fromString(e)),r=t.ko.next();t.Co.set(r,new cv(n)),t.Do=t.Do.insert(n,r),Iy(t.remoteStore,new Ip(Hl(Ul(n.path)),r,2,yc.o))}}function Dv(t,e,n){return ai(this,void 0,void 0,(function(){var r,i,o,s;return ui(this,(function(a){switch(a.label){case 0:return r=Ac(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Td.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return ui(this,(function(h){switch(h.label){case 0:n=Ac(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return cp.forEach(e,(function(e){return cp.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return cp.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!dp(r=h.sent()))throw r;return wc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Cv(t,e){return ai(this,void 0,void 0,(function(){var n,r;return ui(this,(function(i){switch(i.label){case 0:return(n=Ac(t)).currentUser.isEqual(e)?[3,3]:(wc("SyncEngine","User change. New user:",e.toKey()),[4,Dd(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new gc(vc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Dv(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function xv(t,e){var n=Ac(t),r=n.Co.get(e);if(r&&r.bo)return Wh().add(r.key);var i=Wh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function kv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i;return ui(this,(function(o){switch(o.label){case 0:return[4,Ld((n=Ac(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Sv(n,e.targetId,i.To),i)]}}))}))}function Rv(t){return ai(this,void 0,void 0,(function(){var e;return ui(this,(function(n){return[2,Md((e=Ac(t)).localStore).then((function(t){return Dv(e,t)}))]}))}))}function Ov(t,e,n,r){return ai(this,void 0,void 0,(function(){var i,o;return ui(this,(function(s){switch(s.label){case 0:return[4,(a=(i=Ac(t)).localStore,u=e,c=Ac(a),l=Ac(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):cp.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Fy(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ev(i,e,r||null),_v(i,e),function(t,e){Ac(Ac(t)._n).Gt(e)}(i.localStore,e)):Tc(),s.label=4;case 4:return[4,Dv(i,o)];case 5:return s.sent(),[3,7];case 6:wc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function Pv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return ui(this,(function(l){switch(l.label){case 0:return jv(n=Ac(t)),qv(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Lv(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,Ky(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],Iy(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Iv(n,e),Pd(n.localStore,e,!0)})),Ty(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,Lv(n,u)];case 5:return l.sent(),(h=Ac(n)).Co.forEach((function(t,e){Ty(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new Mh(Zc.comparator),n.$o=!1,[4,Ky(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function Lv(t,e,n){return ai(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,y;return ui(this,(function(v){switch(v.label){case 0:n=Ac(t),r=[],i=[],o=0,s=e,v.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Od(n.localStore,Hl(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,kv(n,p)]):[3,6];case 4:(d=v.sent()).snapshot&&i.push(d.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Fd(n.localStore,a)];case 8:return y=v.sent(),[4,Od(n.localStore,y)];case 9:return u=v.sent(),[4,fv(n,Fv(y),a,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Fv(t){return Vl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Mv(t){var e=Ac(t);return Ac(Ac(e.localStore).persistence).fn()}function Vv(t,e,n,r){return ai(this,void 0,void 0,(function(){var i,o,s;return ui(this,(function(a){switch(a.label){case 0:return(i=Ac(t)).$o?(wc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Md(i.localStore)];case 3:return o=a.sent(),s=Xh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Dv(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Pd(i.localStore,e,!0)];case 6:return a.sent(),Iv(i,e,r),[3,8];case 7:Tc(),a.label=8;case 8:return[2]}}))}))}function Uv(t,e,n){return ai(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return ui(this,(function(p){switch(p.label){case 0:if(!(r=jv(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(wc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Fd(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Od(r.localStore,a)];case 3:return u=p.sent(),[4,fv(r,Fv(a),u.targetId,!1)];case 4:p.sent(),Iy(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return ui(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Pd(r.localStore,t,!1).then((function(){Ty(r.remoteStore,t),Iv(r,t)})).catch(nd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function jv(t){var e=Ac(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gv.bind(null,e),e.vo._r=ev.bind(null,e.eventManager),e.vo.Mo=nv.bind(null,e.eventManager),e}function qv(t){var e=Ac(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bv.bind(null,e),e}var Bv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ai(this,void 0,void 0,(function(){return ui(this,(function(e){switch(e.label){case 0:return this.R=py(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Nd(this.persistence,new Sd,t.initialUser,this.R)},t.prototype.qo=function(t){return new Hd(Wd.bs,this.R)},t.prototype.Bo=function(t){return new oy},t.prototype.terminate=function(){return ai(this,void 0,void 0,(function(){return ui(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Kv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return oi(e,t),e.prototype.initialize=function(e){return ai(this,void 0,void 0,(function(){return ui(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Vd(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,qv(this.Qo.syncEngine)];case 4:return n.sent(),[4,Fy(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Nd(this.persistence,new Sd,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new od(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Ed(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Kp.withCacheSize(this.cacheSizeBytes):Kp.DEFAULT;return new bd(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,hy(),fy(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new oy},e}(Bv),zv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return oi(e,t),e.prototype.initialize=function(e){return ai(this,void 0,void 0,(function(){var n,r=this;return ui(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof iy?(this.sharedClientState.syncEngine={ui:Ov.bind(null,n),ai:Vv.bind(null,n),hi:Uv.bind(null,n),fn:Mv.bind(null,n),ci:Rv.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return ai(r,void 0,void 0,(function(){return ui(this,(function(e){switch(e.label){case 0:return[4,Pv(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=hy();if(!iy.yt(e))throw new gc(vc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ed(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new iy(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Kv),Gv=function(){function t(){}return t.prototype.initialize=function(t,e){return ai(this,void 0,void 0,(function(){var n=this;return ui(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return vv(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Cv.bind(null,this.syncEngine),[4,Ky(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Jy},t.prototype.createDatastore=function(t){var e,n,r=py(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new ly(e));return n=t.credentials,new my(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return vv(s.syncEngine,t,0)},o=ay.yt()?new ay:new sy,new wy(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new lv(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return ai(this,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return e=Ac(t),wc("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Ey(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Hv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Qv=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return ai(this,void 0,void 0,(function(){var e,n=this;return ui(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new gc(vc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ai(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ui(this,(function(u){switch(u.label){case 0:return n=Ac(t),r=wf(n.R)+"/documents",i={documents:e.map((function(t){return vf(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){Sc(!!e.found),e.found.name,e.found.updateTime;var n=gf(t,e.found.name),r=pf(e.found.updateTime),i=new dl({mapValue:{fields:e.found.fields}});return vl.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){Sc(!!e.missing),Sc(!!e.readTime);var n=gf(t,e.missing),r=pf(e.readTime);return vl.newNoDocument(n,r)}(e,r):Tc());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Sc(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Rh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return ai(this,void 0,void 0,(function(){var t,e=this;return ui(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Zc.fromPath(n);e.mutations.push(new Oh(r,e.precondition(r)))})),[4,function(t,e){return ai(this,void 0,void 0,(function(){var n,r,i;return ui(this,(function(o){switch(o.label){case 0:return n=Ac(t),r=wf(n.R)+"/documents",i={writes:e.map((function(t){return If(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Tc();e=Oc.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new gc(vc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?gh.updateTime(e):gh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Oc.min()))throw new gc(vc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gh.updateTime(e)}return gh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Wv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new dy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return ai(t,void 0,void 0,(function(){var t,e,n=this;return ui(this,(function(r){return t=new Qv(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Yc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Lh(e)}return!1},t}(),$v=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=$d.UNAUTHENTICATED,this.clientId=Dc.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return ai(r,void 0,void 0,(function(){return ui(this,(function(e){switch(e.label){case 0:return wc("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return ai(this,void 0,void 0,(function(){return ui(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new gc(vc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new up;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return ai(t,void 0,void 0,(function(){var t,n;return ui(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Qy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yv(t,e){return ai(this,void 0,void 0,(function(){var n,r,i=this;return ui(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),wc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return ai(i,void 0,void 0,(function(){return ui(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Dd(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Xv(t,e){return ai(this,void 0,void 0,(function(){var n,r;return ui(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Jv(t)];case 1:return n=i.sent(),wc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return ai(this,void 0,void 0,(function(){var n,r;return ui(this,(function(i){switch(i.label){case 0:return(n=Ac(t)).asyncQueue.verifyOperationInProgress(),wc("RemoteStore","RemoteStore received new credentials"),r=Cy(n),n.Or.add(3),[4,Ey(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,_y(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Jv(t){return ai(this,void 0,void 0,(function(){return ui(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(wc("FirestoreClient","Using default OfflineComponentProvider"),[4,Yv(t,new Bv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Zv(t){return ai(this,void 0,void 0,(function(){return ui(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(wc("FirestoreClient","Using default OnlineComponentProvider"),[4,Xv(t,new Gv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function tg(t){return Jv(t).then((function(t){return t.persistence}))}function eg(t){return Jv(t).then((function(t){return t.localStore}))}function ng(t){return Zv(t).then((function(t){return t.remoteStore}))}function rg(t){return Zv(t).then((function(t){return t.syncEngine}))}function ig(t){return ai(this,void 0,void 0,(function(){var e,n;return ui(this,(function(r){switch(r.label){case 0:return[4,Zv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=hv.bind(null,e.syncEngine),n.onUnlisten=pv.bind(null,e.syncEngine),n)]}}))}))}function og(t,e,n){var r=this;void 0===n&&(n={});var i=new up;return t.asyncQueue.enqueueAndForget((function(){return ai(r,void 0,void 0,(function(){var r;return ui(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Hv({next:function(o){e.enqueueAndForget((function(){return tv(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new gc(vc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new gc(vc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new iv(Ul(n.path),o,{includeMetadataChanges:!0,so:!0});return Zy(t,s)},[4,ig(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function sg(t,e,n){var r=this;void 0===n&&(n={});var i=new up;return t.asyncQueue.enqueueAndForget((function(){return ai(r,void 0,void 0,(function(){var r;return ui(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Hv({next:function(n){e.enqueueAndForget((function(){return tv(t,s)})),n.fromCache&&"server"===r.source?i.reject(new gc(vc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new iv(n,o,{includeMetadataChanges:!0,so:!0});return Zy(t,s)},[4,ig(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var ag=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},ug=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),cg=new Map,lg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},hg=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e($d.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),fg=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),pg=function(){function t(t){var e=this;this.currentUser=$d.UNAUTHENTICATED,this.oc=new up,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){wc("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(wc("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(wc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Sc("string"==typeof n.accessToken),new lg(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return ai(n,void 0,void 0,(function(){return ui(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Sc(null===t||"string"==typeof t),new $d(t)},t}(),dg=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=$d.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),yg=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new dg(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e($d.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e,n){if(!n)throw new gc(vc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function gg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gc(vc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function mg(t,e,n,r){if(!0===e&&!0===r)throw new gc(vc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function bg(t){if(!Zc.isDocumentKey(t))throw new gc(vc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function wg(t){if(Zc.isDocumentKey(t))throw new gc(vc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function _g(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Tc()}function Eg(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new gc(vc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_g(t);throw new gc(vc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ig(t,e){if(e<=0)throw new gc(vc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tg=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new gc(vc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gc(vc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,mg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Sg=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tg({}),this._settingsFrozen=!1,t instanceof ug?(this._databaseId=t,this._credentials=new hg):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new gc(vc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ug(t.options.projectId)}(t),this._credentials=new pg(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new gc(vc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new gc(vc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tg(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new hg;switch(t.type){case"gapi":var e=t.client;return Sc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new yg(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new gc(vc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=cg.get(this))&&(wc("ComponentProvider","Removing Datastore"),cg.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ag=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Dg(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ng=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Dg=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ul(r))||this)._path=r,i.type="collection",i}return oi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ag(this.firestore,null,new Zc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Ng);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Si(t),vg("collection","path",e),t instanceof Sg)return wg(n=Vc.fromString.apply(Vc,hi([e],r))),new Dg(t,null,n);if(!(t instanceof Ag||t instanceof Dg))throw new gc(vc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wg(n=Vc.fromString.apply(Vc,hi([t.path],r)).child(Vc.fromString(e))),new Dg(t.firestore,null,n)}function xg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Si(t),1===arguments.length&&(e=Dc.u()),vg("doc","path",e),t instanceof Sg)return bg(n=Vc.fromString.apply(Vc,hi([e],r))),new Ag(t,null,new Zc(n));if(!(t instanceof Ag||t instanceof Dg))throw new gc(vc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bg(n=t._path.child(Vc.fromString.apply(Vc,hi([e],r)))),new Ag(t.firestore,t instanceof Dg?t.converter:null,new Zc(n))}function kg(t,e){return t=Si(t),e=Si(e),(t instanceof Ag||t instanceof Dg)&&(e instanceof Ag||e instanceof Dg)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Rg(t,e){return t=Si(t),e=Si(e),t instanceof Ng&&e instanceof Ng&&t.firestore===e.firestore&&Wl(t._query,e._query)&&t.converter===e.converter}var Og=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new dy(this,"async_queue_retry"),this.Ic=function(){var e=fy();e&&wc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=fy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=fy();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new up;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return ai(this,void 0,void 0,(function(){var t,e=this;return ui(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!dp(t=n.sent()))throw t;return wc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,_c("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Hy.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Tc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return ai(this,void 0,void 0,(function(){var t;return ui(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Pg(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Lg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Og,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return oi(e,t),e.prototype._terminate=function(){return this._firestoreClient||Mg(this),this._firestoreClient.terminate()},e}(Sg);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t){return t._firestoreClient||Mg(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Mg(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new ag(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new $v(t._credentials,t._queue,a)}function Vg(t,e,n){var r=this,i=new up;return t.asyncQueue.enqueue((function(){return ai(r,void 0,void 0,(function(){var r;return ui(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Yv(t,n)];case 1:return o.sent(),[4,Xv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===vc.FAILED_PRECONDITION||s.code===vc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function Ug(t){if(t._initialized||t._terminated)throw new gc(vc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new gc(vc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),qg=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Bc.fromBase64String(e))}catch(n){throw new gc(vc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(Bc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Bg=function(t){this._methodName=t},Kg=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new gc(vc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new gc(vc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Cc(this._lat,t._lat)||Cc(this._long,t._long)},t}(),zg=/^__.*__$/,Gg=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ah(t,this.data,this.fieldMask,e,this.fieldTransforms):new Sh(t,this.data,e,this.fieldTransforms)},t}(),Hg=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ah(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tc()}}var Wg=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return dm(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Qg(this.Nc)&&zg.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),$g=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||py(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Wg({Nc:t,methodName:e,qc:n,path:jc.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Yg(t){var e=t._freezeSettings(),n=py(t._databaseId);return new $g(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xg(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);lm("Data must be an object, but it was:",s,r);var a,u,c=um(r,s);if(o.merge)a=new qc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=hm(e,f[h],n);if(!s.contains(p))throw new gc(vc.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ym(l,p)||l.push(p)}a=new qc(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Gg(new dl(c),a,u)}var Jg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Bg);function Zg(t,e,n){return new Wg({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var tm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e.prototype._toFieldTransform=function(t){return new yh(t.path,new ah)},e.prototype.isEqual=function(t){return t instanceof e},e}(Bg),em=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return oi(e,t),e.prototype._toFieldTransform=function(t){var e=Zg(this,t,!0),n=this.Kc.map((function(t){return am(t,e)})),r=new uh(n);return new yh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bg),nm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return oi(e,t),e.prototype._toFieldTransform=function(t){var e=Zg(this,t,!0),n=this.Kc.map((function(t){return am(t,e)})),r=new lh(n);return new yh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bg),rm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return oi(e,t),e.prototype._toFieldTransform=function(t){var e=new fh(t.R,nh(t.R,this.Qc));return new yh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Bg);function im(t,e,n,r){var i=t.Uc(1,e,n);lm("Data must be an object, but it was:",i,r);var o=[],s=dl.empty();Lc(r,(function(t,r){var a=pm(e,t,n);r=Si(r);var u=i.Oc(a);if(r instanceof Jg)o.push(a);else{var c=am(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new qc(o);return new Hg(s,a,i.fieldTransforms)}function om(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[hm(e,r,n)],u=[i];if(o.length%2!=0)throw new gc(vc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(hm(e,o[c])),u.push(o[c+1]);for(var l=[],h=dl.empty(),f=a.length-1;f>=0;--f)if(!ym(l,a[f])){var p=a[f],d=u[f];d=Si(d);var y=s.Oc(p);if(d instanceof Jg)l.push(p);else{var v=am(d,y);null!=v&&(l.push(p),h.set(p,v))}}var g=new qc(l);return new Hg(h,g,s.fieldTransforms)}function sm(t,e,n,r){return void 0===r&&(r=!1),am(n,t.Uc(r?4:3,e))}function am(t,e){if(cm(t=Si(t)))return lm("Unsupported field value:",e,t),um(t,e);if(t instanceof Bg)return function(t,e){if(!Qg(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=am(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Si(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return nh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Rc.fromDate(t);return{timestampValue:lf(e.R,n)}}if(t instanceof Rc)return n=new Rc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:lf(e.R,n)};if(t instanceof Kg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qg)return{bytesValue:hf(e.R,t._byteString)};if(t instanceof Ag){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:df(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+_g(t))}(t,e)}function um(t,e){var n={};return Fc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lc(t,(function(t,r){var i=am(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function cm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Rc||t instanceof Kg||t instanceof qg||t instanceof Ag||t instanceof Bg)}function lm(t,e,n){if(!cm(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=_g(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}var i}function hm(t,e,n){if((e=Si(e))instanceof jg)return e._internalPath;if("string"==typeof e)return pm(t,e);throw dm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var fm=new RegExp("[~\\*/\\[\\]]");function pm(t,e,n){if(e.search(fm)>=0)throw dm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(jg.bind.apply(jg,hi([void 0],e.split(".")))))._internalPath}catch(db){throw dm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function dm(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new gc(vc.INVALID_ARGUMENT,(a+=". ")+t+u)}function ym(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vm=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ag(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(mm("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),gm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(vm);function mm(t,e){return"string"==typeof e?pm(t,e):e instanceof jg?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),wm=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return oi(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new _m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(mm("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(vm),_m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(wm),Em=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new bm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new _m(n._firestore,n._userDataWriter,r.key,r,new bm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new gc(vc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new _m(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new _m(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Im(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Im(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tc()}}function Tm(t,e){return t instanceof wm&&e instanceof wm?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Em&&e instanceof Em&&t._firestore===e._firestore&&Rg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){if(ql(t)&&0===t.explicitOrderBy.length)throw new gc(vc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Am=function(){};function Nm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Dm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return oi(e,t),e.prototype._apply=function(t){var e,n,r,i=Yg(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new gc(vc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Lm(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Pm(r,t,h))}a={arrayValue:{values:u}}}else a=Pm(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Lm(s,o),a=sm(n,"where",s,"in"===o||"not-in"===o);var f=El.create(i,o,a);return function(t,e){if(e.g()){var n=Kl(t);if(null!==n&&!n.isEqual(e.field))throw new gc(vc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Bl(t);null!==r&&Fm(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new gc(vc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new gc(vc.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Ng(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(Am),Cm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return oi(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new gc(vc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new gc(vc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ol(e,n);return function(t,e){if(null===Bl(t)){var n=Kl(t);null!==n&&Fm(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Ng(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new Ml(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(Am),xm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return oi(e,t),e.prototype._apply=function(t){return new Ng(t.firestore,t.converter,Ql(t._query,this.Hc,this.Jc))},e}(Am),km=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return oi(e,t),e.prototype._apply=function(t){var e,n,r=Om(t,this.type,this.Yc,this.Xc);return new Ng(t.firestore,t.converter,(e=t._query,n=r,new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(Am),Rm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return oi(e,t),e.prototype._apply=function(t){var e,n,r=Om(t,this.type,this.Yc,this.Xc);return new Ng(t.firestore,t.converter,(e=t._query,n=r,new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(Am);function Om(t,e,n,r){if(n[0]=Si(n[0]),n[0]instanceof vm)return function(t,e,n,r,i){if(!r)throw new gc(vc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Gl(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(al(e,r.key));else{var c=r.data.field(u.field);if(Qc(c))throw new gc(vc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new gc(vc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new kl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Yg(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new gc(vc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new gc(vc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!zl(t)&&-1!==c.indexOf("/"))throw new gc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Vc.fromString(c));if(!Zc.isDocumentKey(l))throw new gc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Zc(l);a.push(al(e,h))}else{var f=sm(n,r,c);a.push(f)}}return new kl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Pm(t,e,n){if("string"==typeof(n=Si(n))){if(""===n)throw new gc(vc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!zl(e)&&-1!==n.indexOf("/"))throw new gc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Vc.fromString(n));if(!Zc.isDocumentKey(r))throw new gc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return al(t,new Zc(r))}if(n instanceof Ag)return al(t,n._key);throw new gc(vc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_g(n)+".")}function Lm(t,e){if(!Array.isArray(t)||0===t.length)throw new gc(vc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new gc(vc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Fm(t,e,n){if(!n.isEqual(e))throw new gc(vc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mm=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),tl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Hc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Tc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Lc(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Kg(Gc(t.latitude),Gc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Wc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp($c(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=zc(t);return new Rc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Vc.fromString(t);Sc(Vf(n));var r=new ug(n.get(1),n.get(3)),i=new Zc(n.popFirst(5));return r.isEqual(e)||_c("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Um=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return oi(e,t),e.prototype.convertBytes=function(t){return new qg(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ag(this.firestore,null,e)},e}(Mm),jm=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Yg(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=qm(t,this._firestore),i=Vm(r.converter,e,n),o=Xg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,gh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=qm(t,this._firestore);return o="string"==typeof(e=Si(e))||e instanceof jg?om(this._dataReader,"WriteBatch.update",s._key,e,n,r):im(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,gh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=qm(t,this._firestore);return this._mutations=this._mutations.concat(new Rh(e._key,gh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new gc(vc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t,e){if((t=Si(t)).firestore!==e)throw new gc(vc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return oi(e,t),e.prototype.convertBytes=function(t){return new qg(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ag(this.firestore,null,e)},e}(Mm);function Km(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Eg(t,Ag);var o=Eg(t.firestore,Lg),s=Yg(o);return Gm(o,[("string"==typeof(e=Si(e))||e instanceof jg?om(s,"updateDoc",t._key,e,n,r):im(s,"updateDoc",t._key,e)).toMutation(t._key,gh.exists(!0))])}function zm(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Si(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Pg(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Pg(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Ag)c=Eg(t.firestore,Lg),l=Ul(t._key.path),u={next:function(e){i[a]&&i[a](Hm(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=Eg(t,Ng);c=Eg(p.firestore,Lg),l=p._query;var d=new Bm(c);u={next:function(t){i[a]&&i[a](new Em(c,d,p,t))},error:i[a+1],complete:i[a+2]},Sm(t._query)}return function(t,e,n,r){var i=this,o=new Hv(r),s=new iv(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return ai(i,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return e=Zy,[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return ai(i,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return e=tv,[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Fg(c),l,h,u)}function Gm(t,e){return function(t,e){var n=this,r=new up;return t.asyncQueue.enqueueAndForget((function(){return ai(n,void 0,void 0,(function(){var n;return ui(this,(function(i){switch(i.label){case 0:return n=dv,[4,rg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Fg(t),e)}function Hm(t,e,n){var r=n.docs.get(e._key),i=new Bm(t);return new wm(t,i,e._key,r,new bm(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return oi(e,t),e.prototype.get=function(e){var n=this,r=qm(e,this._firestore),i=new Bm(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new wm(n._firestore,i,r._key,t._document,new bm(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Yg(t)}return t.prototype.get=function(t){var e=this,n=qm(t,this._firestore),r=new Um(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Tc();var i=t[0];if(i.isFoundDocument())return new vm(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new vm(e._firestore,r,n._key,null,n.converter);throw Tc()}))},t.prototype.set=function(t,e,n){var r=qm(t,this._firestore),i=Vm(r.converter,e,n),o=Xg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=qm(t,this._firestore);return o="string"==typeof(e=Si(e))||e instanceof jg?om(this._dataReader,"Transaction.update",s._key,e,n,r):im(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=qm(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){if("undefined"==typeof Uint8Array)throw new gc(vc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $m(){if("undefined"==typeof atob)throw new gc(vc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ym=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return $m(),new t(qg.fromBase64String(e))},t.fromUint8Array=function(e){return Wm(),new t(qg.fromUint8Array(e))},t.prototype.toBase64=function(){return $m(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Wm(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Xm=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ug(t=Eg(t,Lg));var n=Fg(t),r=t._freezeSettings(),i=new Gv;return Vg(n,i,new Kv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ug(t=Eg(t,Lg));var e=Fg(t),n=t._freezeSettings(),r=new Gv;return Vg(e,r,new zv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new gc(vc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new up;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return ai(e,void 0,void 0,(function(){var e;return ui(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ai(this,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return hp.yt()?(e=t+"main",[4,hp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ed(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Jm=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ug||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Ec("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Eg(t,Sg))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Ec("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=si({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fi.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),fi.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new gc(vc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new fg(new lg(o,new $d(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ai(e,void 0,void 0,(function(){var e,n;return ui(this,(function(r){switch(r.label){case 0:return[4,tg(t)];case 1:return e=r.sent(),[4,ng(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=Ac(i),o.Or.delete(0),_y(o))]}var i,o}))}))}))}(Fg(Eg(this._delegate,Lg)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ai(e,void 0,void 0,(function(){var e,n;return ui(this,(function(r){switch(r.label){case 0:return[4,tg(t)];case 1:return e=r.sent(),[4,ng(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return ai(this,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return(e=Ac(t)).Or.add(0),[4,Ey(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Fg(Eg(this._delegate,Lg)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&mg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new up;return t.asyncQueue.enqueueAndForget((function(){return ai(e,void 0,void 0,(function(){var e;return ui(this,(function(r){switch(r.label){case 0:return e=wv,[4,rg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Fg(Eg(this._delegate,Lg)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new Hv(e);return t.asyncQueue.enqueueAndForget((function(){return ai(n,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ac(t).Gr.add(e),e.next()},[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return ai(n,void 0,void 0,(function(){var e;return ui(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ac(t).Gr.delete(e)},[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Fg(e=Eg(e,Lg)),Pg(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new gc(vc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fb(this,Cg(this._delegate,t))}catch(e){throw ib(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new rb(this,xg(this._delegate,t))}catch(e){throw ib(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new cb(this,function(t,e){if(t=Eg(t,Sg),vg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gc(vc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ng(t,null,(n=e,new Ml(Vc.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw ib(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new up;return t.asyncQueue.enqueueAndForget((function(){return ai(n,void 0,void 0,(function(){var n;return ui(this,(function(i){switch(i.label){case 0:return[4,(o=t,Zv(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new Wv(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(Fg(e=this._delegate),(function(r){return function(e){return t(new tb(n,e))}(new Qm(e,r))}))},t.prototype.batch=function(){var t=this;return Fg(this._delegate),new eb(new jm(this._delegate,(function(e){return Gm(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new gc(vc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new gc(vc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Zm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return oi(e,t),e.prototype.convertBytes=function(t){return new Ym(new qg(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return rb.eu(e,this.firestore,null)},e}(Mm);var tb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Zm(t)}return t.prototype.get=function(t){var e=this,n=pb(t);return this._delegate.get(n).then((function(t){return new ab(e._firestore,new wm(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=pb(t);return n?(gg("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=pb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,hi([s,e,n],i)),this},t.prototype.delete=function(t){var e=pb(t);return this._delegate.delete(e),this},t}(),eb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=pb(t);return n?(gg("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=pb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,hi([s,e,n],i)),this},t.prototype.delete=function(t){var e=pb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),nb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new _m(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ub(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Zm(e),n),i.set(n,o)),o},t}();nb.su=new WeakMap;var rb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zm(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new gc(vc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Ag(n._delegate,r,new Zc(e)))},t.eu=function(e,n,r){return new t(n,new Ag(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fb(this.firestore,Cg(this._delegate,t))}catch(e){throw ib(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Si(t))instanceof Ag&&kg(this._delegate,t)},t.prototype.set=function(t,e){e=gg("DocumentReference.set",e);try{return function(t,e,n){t=Eg(t,Ag);var r=Eg(t.firestore,Lg),i=Vm(t.converter,e,n);return Gm(r,[Xg(Yg(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,gh.none())])}(this._delegate,t,e)}catch(n){throw ib(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Km(this._delegate,t):Km.apply(void 0,hi([this._delegate,t,e],n))}catch(i){throw ib(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Gm(Eg((t=this._delegate).firestore,Lg),[new Rh(t._key,gh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ob(e),i=sb(e,(function(e){return new ab(t.firestore,new wm(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return zm(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Eg(t,Ag);var e=Eg(t.firestore,Lg),n=Fg(e),r=new Bm(e);return function(t,e){var n=this,r=new up;return t.asyncQueue.enqueueAndForget((function(){return ai(n,void 0,void 0,(function(){var n;return ui(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ai(this,void 0,void 0,(function(){var r,i;return ui(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=Ac(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new gc(vc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Qy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,eg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new wm(e,r,t._key,n,new bm(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Eg(t,Ag);var e=Eg(t.firestore,Lg);return og(Fg(e),t._key,{source:"server"}).then((function(n){return Hm(e,t,n)}))}(this._delegate):function(t){t=Eg(t,Ag);var e=Eg(t.firestore,Lg);return og(Fg(e),t._key).then((function(n){return Hm(e,t,n)}))}(this._delegate)).then((function(t){return new ab(e.firestore,new wm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(nb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function ib(t,e,n){return t.message=t.message.replace(e,n),t}function ob(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Pg(r))return r}return{}}function sb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Pg(t[0])?t[0]:Pg(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ab=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new rb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Tm(this._delegate,t._delegate)},t}(),ub=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ab),cb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zm(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Nm(this._delegate,(o=r,s=i=n,a=mm("where",e),new Dm(a,s,o))))}catch(i){throw ib(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Nm(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=mm("orderBy",t);return new Cm(r,n)}(e,n)))}catch(r){throw ib(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Nm(this._delegate,(Ig("limit",n=e),new xm("limit",n,"F"))))}catch(r){throw ib(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Nm(this._delegate,(Ig("limitToLast",n=e),new xm("limitToLast",n,"L"))))}catch(r){throw ib(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Nm(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new km("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw ib(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Nm(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new km("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw ib(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Nm(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rm("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw ib(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Nm(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rm("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw ib(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Rg(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Eg(t,Ng);var e=Eg(t.firestore,Lg),n=Fg(e),r=new Bm(e);return function(t,e){var n=this,r=new up;return t.asyncQueue.enqueueAndForget((function(){return ai(n,void 0,void 0,(function(){var n;return ui(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ai(this,void 0,void 0,(function(){var r,i,o,s,a;return ui(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Ld(t,e,!0)];case 1:return a=u.sent(),r=new av(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Qy(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,eg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Em(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Eg(t,Ng);var e=Eg(t.firestore,Lg),n=Fg(e),r=new Bm(e);return sg(n,t._query,{source:"server"}).then((function(n){return new Em(e,r,t,n)}))}(this._delegate):function(t){t=Eg(t,Ng);var e=Eg(t.firestore,Lg),n=Fg(e),r=new Bm(e);return Sm(t._query),sg(n,t._query).then((function(n){return new Em(e,r,t,n)}))}(this._delegate)).then((function(t){return new hb(e.firestore,new Em(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ob(e),i=sb(e,(function(e){return new hb(t.firestore,new Em(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return zm(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(nb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),lb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new ub(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),hb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new cb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new ub(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new lb(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new ub(n._firestore,r))}))},t.prototype.isEqual=function(t){return Tm(this._delegate,t._delegate)},t}(),fb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return oi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new rb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new rb(this.firestore,void 0===t?xg(this._delegate):xg(this._delegate,t))}catch(e){throw ib(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=Eg(e.firestore,Lg),i=xg(e),o=Vm(e.converter,n),Gm(r,[Xg(Yg(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,gh.exists(!1))]).then((function(){return i}))).then((function(t){return new rb(s.firestore,t)}))},e.prototype.isEqual=function(t){return kg(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(nb.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(cb);function pb(t){return Eg(t,Ag)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var db,yb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(jg.bind.apply(jg,hi([void 0],t)))}return t.documentId=function(){return new t(jc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Si(t))instanceof jg&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),vb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new tm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Jg("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new em("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nm("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new rm("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),gb={Firestore:Jm,GeoPoint:Kg,Timestamp:Rc,Blob:Ym,Transaction:tb,WriteBatch:eb,DocumentReference:rb,DocumentSnapshot:ab,Query:cb,QueryDocumentSnapshot:ub,QuerySnapshot:hb,CollectionReference:fb,FieldPath:yb,FieldValue:vb,setLogLevel:function(t){var e;e=t,mc.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(db=to).INTERNAL.registerComponent(new Ai("firestore",(function(t){return function(t,e){return new Jm(t,new Lg(t,e),new Xm)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},gb))),db.registerVersion("@firebase/firestore","2.3.10");export{Ve as a,vr as b,lr as c,Je as d,ar as e,to as f,Jn as g,ri as h,cn as o,Me as p,ne as r,u as t,Ue as w};
